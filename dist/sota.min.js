!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("d3")):"function"==typeof define&&define.amd?define(["d3"],a):(t=t||self).sota=a(t.d3)}(this,(function(t){"use strict";function a(t,a="#ffffff",e=8,n=!1){const s=t.substr(1),l=parseInt("0x"+s.substr(0,2)),o=parseInt("0x"+s.substr(2,2)),r=parseInt("0x"+s.substr(4,2)),i=a.substr(1),c=n?e:e+1,h=(parseInt("0x"+i.substr(0,2))-l)/c,d=(parseInt("0x"+i.substr(2,2))-o)/c,g=(parseInt("0x"+i.substr(4,2))-r)/c;let p,m=[t];for(let t=1;t<e-1;t++){const a=l+h*t,e=o+d*t,n=r+g*t,s="#"+Math.round(a).toString(16)+Math.round(e).toString(16)+Math.round(n).toString(16);m.push(s)}if(n)p=a;else{const t=l+h*e,a=o+d*e,n=r+g*e;p="#"+Math.round(t).toString(16)+Math.round(a).toString(16)+Math.round(n).toString(16)}return m.push(p),m}var e={numberFont:"Montserrat",labelFont:"Lora",sections:[{slug:"default",name:"Default",colors:a("#000000")}],separatorStrokeWidth:1,barHeight:32,barMargin:16,labelLeft:6,labelBelow:8,groupLabelMargin:32,legendMargin:24,xAxisTop:24,overflowOffset:24,lineColor:"#777777",labelColor:"#777777",mainHeight:300,tickSize:4,labelAngle:30,groupedBarChart:{barHeight:24,barMargin:8},margin:{top:20,bottom:20,left:0,right:0},swatch:{between:12,belowBetween:8,right:24,width:32,height:24,below:16}};function n(a){const e=a.node().offsetWidth/2,n=t.event.pageX;return n-e<0?e:n+e>window.innerWidth?window.innerWidth-e:n}function s(a){return t.format(".1f")(a)+"%"}function l(a,l,o,r,i){a.on("mouseover",(function(a,c){t.select(this).attr("opacity",e.hoverOpacity),l.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"></span><span class="sota-heavy-label">${r[c]}</span><br/>Percentage: ${s(o[c])}`;return i&&(t+="<br/>Number of responses: "+i[c]),t+="</span>",t}).style("left",n(l)+"px").style("top",t.event.pageY+"px")})).on("mousemove",a=>{l.style("left",n(l)+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),l.style("opacity",0)}))}function o(a,e,n,s,l,o){if(!a&&!e)throw`No selector or section specified for chart with "${dataFile}" dataFile parameter.`;const r=a?t.select(a):t.select(`#sota-section-${e} .sota-section-inner`).append("div").attr("class","sota-module");e&&n&&r.append("h3").text(n),e&&s&&r.append("div").attr("class","subtitle").append("span").text(s);const i=r.append("svg"),c=t.select("body").append("div").attr("class","sota-tooltip"),h=r.node().offsetWidth,d=h-l.left-l.right,g=i.append("g").attr("class","sota-mainChart").attr("transform",`translate(${l.left+o} ${l.right})`).attr("width",d);return{container:r,svg:i,tooltip:c,width:h,mainWidth:d,mainChart:g}}function r(a,e,n=null){return n=null==n?t.sum(a,t=>+t.value):n,[e?a.map(t=>+t.value):a.map(t=>+t.value/n*100),!e&&a.map(t=>+t.value),a.map(t=>t.label)]}function i(t){const a=new Event("sotaChartRendered"),e=t.closest(".sota-section-inner");null!==e&&e.dispatchEvent(a)}let c={barChart:function({dataFile:a,selector:n=!1,title:c=!1,subtitle:h=!1,section:d=!1,inputIsPercentage:g=!1,showXAxis:p=!0,showSeparators:m=!0,displayPercentage:x=!0,totalResp:u=null,maxVal:f=null,minVal:b=null,margin:w=e.margin}){const v=e.tickSize,y=e.separatorStrokeWidth,B=e.labelLeft,k=e.barHeight,C=e.barMargin,A=e.overflowOffset,$=e.xAxisTop,{container:j,svg:L,tooltip:M,width:z,mainWidth:S,mainChart:P}=o(n,d,c,h,w,A);t.csv(a+".csv").then(a=>{const e=k+C;let o=a.length*e;const[c,h,d]=r(a,g,u),W=x||g?c:h;if(null==b)b=g||x?0:t.min(W);else if(!0===b)b=t.min(W);else if(isNaN(b)||""===b)throw"invalid minVal for graph on "+n;if(null==f)f=g||x?100:t.max(W);else if(!0===f)f=t.max(W);else if(isNaN(f)||""===f)throw"invalid maxVal for graph on "+n;const I=t.scaleLinear().domain([b,f]).range([0,S]);let N;function O(t){return t*e}if(p&&(N=P.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-num-axis").call(t.axisBottom(I).tickSize(-v)).attr("transform","translate(0 "+(o+$)+")")),P.selectAll(".sota-barChart-bar").data(W).join("rect").attr("class","sota-barChart-bar sota-gen-bar").attr("width",t=>I(t)).attr("height",k).attr("x",0).attr("y",(t,a)=>O(a)),P.selectAll(".sota-barChart-hiddenBar").data(W).join("rect").attr("class","sota-barChart-hiddenBar").attr("width",S).attr("height",k).attr("x",0).attr("y",(t,a)=>O(a)).attr("fill","transparent").call(l,M,c,d,h),P.selectAll(".sota-barChart-label").data(a).join("text").attr("class","sota-barChart-label sota-text-label sota-heavy-label").html(t=>t.label).attr("alignment-baseline","central").attr("dominant-baseline","central").attr("x",B).attr("y",(t,a)=>O(a)+k/2),m&&P.selectAll(".sota-barChart-separator").data(W).join("line").attr("class","sota-barChart-separator").attr("x1",0).attr("x2",S).attr("y1",(t,a)=>O(a)+k+6).attr("y2",(t,a)=>O(a)+k+6).attr("stroke-width",y).attr("stroke","#dddddd"),P.selectAll(".sota-barChart-value").data(W).join("text").attr("class","sota-barChart-value sota-num-label").html((t,a)=>g||x?s(t):t).attr("alignment-baseline","central").attr("dominant-baseline","central").attr("text-anchor","end").attr("x",S).attr("y",(t,a)=>O(a)+k/2),p){let a=[];N.selectAll("text").each((function(){a.push(this.getBBox().y+this.getBBox().height)})),o+=+t.max(a)}const E=o+w.top+w.bottom;L.style("width",z+2*A+"px").attr("height",E).style("margin-left",-A+"px"),i(j.node())})},pieChart:function({dataFile:a,selector:n=!1,title:c=!1,subtitle:h=!1,section:d=!1,inputIsPercentage:g=!1,sorted:p=!0,pieRad:m=150,pieThick:x=80,margin:u=e.margin}){const f=e.lineColor,b=e.separatorStrokeWidth,w=e.separatorStrokeWidth,v=e.swatch.between,y=e.swatch.right,B=e.swatch.width,k=e.swatch.height,C=e.swatch.belowBetween,A=e.swatch.below,$=e.legendMargin,j=e.overflowOffset,{container:L,svg:M,tooltip:z,width:S,mainWidth:P,mainChart:W}=o(n,d,c,h,u,j);P<2*m&&(m=P/2),x>m&&(x=50),t.csv(a+".csv").then(a=>{const[e,n,o]=r(a,g),c=(p?t.pie():t.pie().sort(null))(e);let h=0,d=[];const I=t.scaleOrdinal().domain(o).range(t.map(o,(t,a)=>"sota-fill-"+(o.length>3?a+1:2*a+1)).keys()),N=W.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${u.top})`);if(N.selectAll("nothing").data(a).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t.label).attr("x",(function(){d.push(this.getBBox().width)})).remove(),t.sum(d,t=>t)+o.length*(B+v)+(o.length-1)*y>P){let a=P-t.max(d)-B-v;N.selectAll(".sota-gen-legend-swatch").data(o).join("rect").attr("class",t=>"sota-gen-legend-swatch "+I(t)).attr("x",a).attr("y",(t,a)=>(k+C)*a).attr("width",B).attr("height",k),N.selectAll(".sota-gen-legend-text").data(o).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",a+B+v).attr("y",(t,a)=>(k+C)*a+k/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),h=o.length*k+(o.length-1)*C+A+$}else{let a=P-(t.sum(d,t=>t)+o.length*(B+v)+(o.length-1)*y);N.selectAll(".sota-gen-legend-swatch").data(o).join("rect").attr("class",t=>"sota-gen-legend-swatch "+I(t)).attr("x",(e,n)=>a+n*(B+v+y)+t.sum(d.slice(0,n),t=>t)).attr("y",0).attr("width",B).attr("height",k),N.selectAll(".sota-gen-legend-text").data(o).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,n)=>a+n*(B+v+y)+B+v+t.sum(d.slice(0,n),t=>t)).attr("y",k/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),h=k+A+$}const O=W.append("g").attr("transform","translate("+P/2+","+(m+h)+")"),E=t.arc().innerRadius(.8*m-.8*x).outerRadius(.8*m),V=t.arc().innerRadius(.9*m).outerRadius(.9*m);O.selectAll(".sota-pieChart-slice").data(c).join("path").attr("class",(t,a)=>"sota-pieChart-slice "+I(a)).attr("d",E).attr("stroke","#fff").style("stroke-width",w).call(l,z,e,o,n);let Y=!1;O.selectAll(".sota-pieChart-polyline").data(c).join("polyline").attr("class","sota-pieChart-polyline").attr("stroke",f).style("fill","none").attr("stroke-width",b).attr("points",(t,a)=>{let e=E.centroid(t),n=V.centroid(t),s=V.centroid(t);const l=V.centroid(t),o=a>0&&V.centroid(c[a-1]),r=(t.endAngle+t.startAngle)/2<Math.PI;return a>0&&Math.sign(l[0])==Math.sign(o[0])&&Math.abs(o[1]-l[1])<20?(s[0]=.95*m*((Y?r:!r)?1:-1),Y=!0):(s[0]=.95*m*((Y?!r:r)?1:-1),Y=!1),[e,n,s]}),Y=!1,O.selectAll(".sota-pieChart-label").data(c).join("text").attr("class","sota-pieChart-label sota-num-label").text((t,a)=>s(e[a])).attr("alignment-baseline","central").attr("dominant-baseline","central").attr("transform",(t,a)=>{const e=V.centroid(t),n=a>0&&V.centroid(c[a-1]),s=(t.endAngle+t.startAngle)/2<Math.PI;return a>0&&Math.sign(e[0])==Math.sign(n[0])&&Math.abs(n[1]-e[1])<20?(e[0]=.99*m*((Y?s:!s)?1:-1),Y=!0):(e[0]=.99*m*((Y?!s:s)?1:-1),Y=!1),a==c.length-1&&(Y=!1),"translate("+e+")"}).style("text-anchor",(t,a)=>{const e=V.centroid(t),n=a>0&&V.centroid(c[a-1]),s=(t.endAngle+t.startAngle)/2<Math.PI;if(a>0&&Math.sign(e[0])==Math.sign(n[0])&&Math.abs(n[1]-e[1])<20){const t=(Y?s:!s)?"start":"end";return Y=!0,t}{const t=(Y?!s:s)?"start":"end";return Y=!1,t}});const F=2*m+h+u.top+u.bottom;M.style("width",S+2*j+"px").attr("height",F).style("margin-left",-j+"px"),i(L.node())})},lineGraph:function({dataFile:a,selector:n=!1,title:l=!1,subtitle:r=!1,section:c=!1,inputIsPercentage:h=!1,minVal:d=null,maxVal:g=null,height:p=300,customTooltipAppend:m="",prop5:x="value5",prop6:u="value6",margin:f={top:20,bottom:20,left:24,right:0}}){const b=e.separatorStrokeWidth,w=e.overflowOffset,{container:v,svg:y,tooltip:B,width:k,mainWidth:C,mainChart:A}=o(n,c,l,r,f,w);t.csv(a+".csv").then(a=>{const e=a.map(t=>t.label),l=a.map(t=>+t.value);if(null==d)d=h?0:t.min(a,t=>t.value);else if(1==d)d=t.min(a,t=>t.value);else if(isNaN(d)||""==d)throw"invalid minVal for graph on "+n;if(null==g)g=h?100:t.max(a,t=>t.value);else if(1==g)g=t.max(a,t=>t.value);else if(isNaN(g)||""==g)throw"invalid maxVal for graph on "+n;const o=t.scaleBand().domain(e.map(t=>t)).range([0,C]),r=t.scaleLinear().domain([d,g]).range([p-f.bottom,f.top]);A.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(o).ticks(a.length).tickSize(-8)).style("transform","translateY("+(p-f.bottom)+"px)"),A.append("g").attr("class","sota-gen-axis sota-gen-YAxis sota-num-axis").call(t.axisLeft(r).tickSize(-8)),A.selectAll(".sota-lineGraph-path").data([l]).join("path").attr("class","sota-lineGraph-path").attr("d",t.line().x((t,a)=>o(e[a])+o.bandwidth()/2).y(t=>r(t))).attr("fill","none").attr("stroke","#bbb").style("stroke-width",3),A.selectAll(".sota-lineGraph-circle").data(l).join("circle").attr("class","sota-lineGraph-circle").attr("cx",(t,a)=>o(e[a])+o.bandwidth()/2).attr("cy",t=>r(t)).attr("r",4).attr("stroke","white").style("stroke-width",b).on("mouseover",(function(a,n){t.select(this).attr("opacity",.8),B.style("opacity",1).html(`<span class="sota-tooltip-label">${e[n]}</span><br/>Value: `+(h?s(a):a)+"</span>").style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",a=>{B.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),B.style("opacity",0)})),A.selectAll(".sota-lineGraph-label").data(l).join("text").attr("class","sota-lineGraph-label sota-num-label").text((t,a)=>{if(h)return t+"%"}).attr("x",(t,a)=>o(e[a])+o.bandwidth()/2).attr("y",t=>r(t)-16).style("text-anchor","middle"),y.style("width",k+2*w+"px").attr("height",p).style("margin-left",-w+"px"),i(v.node())})},stackedBarChart:function({dataFile:a,selector:n=!1,title:l=!1,subtitle:r=!1,section:c=!1,inputIsPercentage:h=!1,showXAxis:d=!0,labelStyle:g="onBar",groupLabelStyle:p="none",showLegend:m=!0,prop5:x="value5",prop6:u="value6",margin:f=e.margin}){const b=e.separatorStrokeWidth,w=e.barHeight,v=e.barMargin,y=e.overflowOffset,B=e.groupLabelMargin,k=e.labelLeft,C=e.labelBelow,A=e.lineColor,$=e.swatch.between,j=e.swatch.right,L=e.swatch.width,M=e.swatch.height,z=e.swatch.belowBetween,S=e.swatch.below,P=e.xAxisTop,{container:W,svg:I,tooltip:N,width:O,mainWidth:E,mainChart:V}=o(n,c,l,r,f,y);t.csv(a+".csv").then(a=>{var e=w+v,n=a.length*e,l=0;"onBar"==p&&(e+=a.length*B,n+=a.length*B,l=B);const o=a.columns.slice(1),r=t.map(a,t=>t.group).keys();var c=[];h?a.forEach(t=>{let a=0,e=[];for(let n of o){let s=+t[n];e.push([s,a]),a+=s}c.push(e)}):a.forEach(a=>{let e=0,n=t.sum(o,t=>+a[t]),s=[];for(let t of o){let l=+a[t]/n*100;s.push([l,e,+a[t]]),e+=l}c.push(s)});const x=t.scaleBand().domain(r).range([0,n]).padding([.2]),u=t.scaleLinear().domain([0,100]).range([0,E]),Y=t.scaleOrdinal().domain(o).range(t.map(o,(t,a)=>"sota-fill-"+(o.length>3?a+1:2*a+1)).keys());d&&(V.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-num-axis").call(t.axisBottom(u).ticks(a.length).tickSize(-8)).attr("transform","translate(0 "+(n+P)+")"),n+=20+P);var F=0;if(m){let a=[];const e=I.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${f.top})`);if(e.selectAll("nothing").data(o).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t).attr("x",(function(){a.push(this.getBBox().width)})).remove(),t.sum(a,t=>t)+o.length*(L+$)+(o.length-1)*j>E){let n=O+y-t.max(a)-L-$;e.selectAll(".sota-gen-legend-swatch").data(o).join("rect").attr("class",t=>"sota-gen-legend-swatch "+Y(t)).attr("x",n).attr("y",(t,a)=>(M+z)*a).attr("width",L).attr("height",M),e.selectAll(".sota-gen-legend-text").data(o).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",n+L+$).attr("y",(t,a)=>(M+z)*a+M/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),F=o.length*M+(o.length-1)*z+S}else{let n=O+y-(t.sum(a,t=>t)+o.length*(L+$)+(o.length-1)*j);e.selectAll(".sota-gen-legend-swatch").data(o).join("rect").attr("class",t=>"sota-gen-legend-swatch "+Y(t)).attr("x",(e,s)=>n+s*(L+$+j)+t.sum(a.slice(0,s),t=>t)).attr("y",0).attr("width",L).attr("height",M),e.selectAll(".sota-gen-legend-text").data(o).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,s)=>n+s*(L+$+j)+L+$+t.sum(a.slice(0,s),t=>t)).attr("y",M/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),F=M+S}}const H=V.selectAll(".sota-stackedBarChart-group").data(c).join("g").attr("class","sota-stackedBarChart-group").attr("transform",(t,a)=>"translate(0 "+(x(r[a])+l-v)+")");H.selectAll(".sota-stackedBarChart-bar").data(t=>t).join("rect").attr("class",(t,a)=>"sota-stackedBarChart-bar "+Y(a)).attr("x",t=>u(t[1])).attr("y",0).attr("width",t=>u(t[0])).attr("height",w).on("mouseover",(function(a,e){t.select(this).attr("opacity",.8),N.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"><span class="sota-heavy-label">${o[e]}</span><br/>Percentage: ${s(a[0])}`;return h||(t+="<br/>Number of responses: "+a[2]),t+="</span>",t}).style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",()=>{N.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),N.style("opacity",0)})),H.selectAll(".sota-stackedBarChart-separator").data(t=>t).join("rect").attr("class","sota-stackedBarChart-separator").attr("fill","white").attr("x",t=>u(t[1])+u(t[0])).attr("y",0).attr("width",t=>t[0]>0?b:0).attr("height",w),"onBar"==p&&V.selectAll(".sota-stackedBarChart-groupLabel-onBar").data(r).join("text").attr("class","sota-stackedBarChart-groupLabel-onBar sota-text-label sota-heavy-label").text(t=>t).attr("alignment-baseline","bottom").attr("x",0).attr("y",t=>x(t));var G=0;if("onBar"==g)H.selectAll(".sota-stackedBarChart-label-onBar").data(t=>t).join("text").attr("class","sota-stackedBarChart-label-onBar sota-num-label").text(a=>t.format(".1f")(a[0])+"%").attr("alignment-baseline","central").attr("dominant-baseline","central").attr("text-anchor","end").attr("x",t=>u(t[1])+u(t[0])-k).attr("y",w/2).style("display",(function(t,a){return this.getBBox().x<(a>0?u(t[1]):f.left)?"none":""}));else if("aboveBar"==g){var X=[];H.selectAll(".sota-stackedBarChart-label-aboveBar-text").data(t=>t).join("text").attr("class","sota-stackedBarChart-label-aboveBar-text sota-num-label").text((a,e)=>`${o[e]}: ${t.format(".1f")(a[0])}%`).attr("x",t=>u(t[1])+u(t[0])/2).attr("y",(function(t){return X.push([this.getBBox().x,this.getBBox().width]),-2*C})).attr("alignment-baseline","bottom");let a=[];!function t(e){if(e==X.length-1)return a[e]=-2,-2;if(X[e][0]+X[e][1]+k>X[e+1][0]){X[e+1][0]=X[e][0]+X[e][1]+k;let n=t(e+1)-1;return a[e]=n,n}return t(e+1),a[e]=-2,-2}(0),H.selectAll(".sota-stackedBarChart-label-aboveBar-line").data(t=>t).join("polyline").attr("class","sota-stackedBarChart-label-aboveBar-line").attr("points",(t,e)=>{let n=u(t[1])+u(t[0])/2,s=w/2,l=n,o=(a[e]+1)*C;return`${n},${s} ${l},${o} ${X[e][0]+X[e][1]},${o}`}).attr("stroke-width",b).attr("stroke",A).attr("fill","none"),H.selectAll(".sota-stackedBarChart-label-aboveBar-text").data(t=>t).join("text").attr("x",(t,a)=>X[a][0]).attr("y",(t,e)=>a[e]*C),G=-1*t.min(a)*C+20}const R=n+f.top+f.bottom+F+G;I.style("width",O+2*y+"px").attr("height",R).style("margin-left",-y+"px"),V.attr("transform",`translate(${y} ${f.top+F+G})`).attr("width",E),i(W.node())})},customBarChart:function({dataFile:a,selector:n=!1,title:c=!1,subtitle:h=!1,section:d=!1,shapeFile:g,shapeWidth:p=300,inputIsPercentage:m=!1,margin:x=e.margin}){const{container:u,svg:f,tooltip:b,width:w,mainWidth:v,mainChart:y}=o(n,d,c,h,x,overflowOffset),B=e.separatorStrokeWidth,k=e.labelLeft,C=e.labelBelow,A=e.lineColor;t.xml("shapes/"+g+".svg").then(e=>{let o=document.importNode(e.documentElement,!0),c=t.select(o).select("path").node(),h=0,d=0;f.append(()=>c).attr("class",(function(){return h=this.getBBox().width,d=this.getBBox().height,""})).remove();let g=p/h,w=d*g;f.append("defs").append("clipPath").attr("id","shapeDef"+n.substring(1)).append(()=>c).attr("transform",`scale(${g})`),t.csv(a+".csv").then(a=>{const[e,o,i]=r(a,m);let c=0,h=[];for(let t of a)h.push(c),c+=+t.value;const d=t.scaleLinear().domain([0,t.sum(a,t=>+t.value)]).range([0,p]),g=t.scaleOrdinal().domain(t.map(a,t=>t.label)).range(t.map(a,(t,a)=>"sota-fill-"+(a+1)).keys());y.selectAll(".sota-customBarChart-bar").data(a).join("rect").attr("class",t=>"sota-customBarChart-bar "+g(t.label)).attr("x",(t,a)=>d(h[a])).attr("y",0).attr("width",t=>d(t.value)).attr("height",w).attr("clip-path","url(#shapeDef"+n.substring(1)+")").call(l,b,e,i,o),y.selectAll(".sota-customBarChart-separator").data(a).join("rect").attr("class","sota-customBarChart-separator").attr("x",(t,a)=>0==a?-B:d(h[a])).attr("y",0).attr("width",B).attr("height",w).attr("fill","white").attr("clip-path","url(#shapeDef"+n.substring(1)+")");var u=[];y.selectAll(".sota-customBarChart-label-aboveBar-text").data(a).join("text").attr("class","sota-customBarChart-label-aboveBar-text").html((t,a)=>`<tspan class="sota-text-label sota-heavy-label">${t.label}:</tspan><tspan class="sota-num-label"> ${s(e[a])}</tspan>`).attr("x",(t,a)=>d(h[a])+d(t.value)/2+k).attr("y",(function(t){return u.push([this.getBBox().x,this.getBBox().width]),w+3*C})).attr("alignment-baseline","top");let v=[];!function t(a){if(a==u.length-1)return v[a]=3,3;if(u[a][0]+u[a][1]+2*k>u[a+1][0]){u[a+1][0]=u[a][0]+u[a][1]+2*k;let e=t(a+1)+1;return v[a]=e,e}return t(a+1),v[a]=3,3}(0),y.selectAll(".sota-customBarChart-label-aboveBar-line").data(a).join("polyline").attr("class","sota-customBarChart-label-aboveBar-line").attr("points",(t,a)=>{let e=d(h[a])+d(t.value)/2,n=w-C,s=e,l=w+(v[a]+1)*C;return`${e},${n} ${s},${l} ${u[a][0]+u[a][1]},${l}`}).attr("stroke-width",B).attr("stroke",A).attr("fill","none"),y.selectAll(".sota-customBarChart-label-aboveBar-text").data(a).join("text").attr("x",(t,a)=>u[a][0]).attr("y",(t,a)=>w+v[a]*C);let $=t.max(v)*C+20,j=w+x.top+x.bottom+$;f.attr("height",j),y.attr("transform",`translate(${x.left} ${x.top})`)}),i(u.node())})},columnChart:function({dataFile:a,selector:n=!1,title:s=!1,subtitle:c=!1,section:h=!1,inputIsPercentage:d=!1,displayPercentage:g=!0,totalResp:p=null,maxVal:m=null,minVal:x=null,mainHeight:u=e.mainHeight,showLegend:f=!1,margin:b={top:20,bottom:20,left:24,right:0}}){const w=e.overflowOffset,v=e.tickSize,y=e.labelAngle,B=e.swatch.between,k=e.swatch.right,C=e.swatch.width,A=e.swatch.height,$=e.swatch.belowBetween,j=e.swatch.below,{container:L,svg:M,tooltip:z,width:S,mainWidth:P,mainChart:W}=o(n,h,s,c,b,w);t.csv(a+".csv").then(a=>{const[e,s,o]=r(a,d,p),c=g||d?e:s;if(null===x)x=d||g?0:t.min(c);else if(!0===x)x=t.min(c);else if(isNaN(x)||""===x)throw"invalid minVal for graph on "+n;if(null===m)m=d||g?100:t.max(c);else if(!0===m)m=t.max(c);else if(isNaN(m)||""===m)throw"invalid maxVal for graph on "+n;const h=t.scaleBand().domain(o).range([0,P]).padding([.3]),I=t.scaleLinear().domain([x,m]).range([u,0]),N=t.scaleOrdinal().domain(o).range(t.map(o,(t,a)=>"sota-fill-"+(a+1)).keys());let O,E=0,V=!1;if(f){let e=[];const n=M.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${b.top})`);if(n.selectAll("nothing").data(a).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t.label).attr("x",(function(){e.push(this.getBBox().width)})).remove(),t.sum(e,t=>t)+e.length*B+(e.length-1)*k>P){let a=S-t.max(e)-C-B;n.selectAll(".sota-gen-legend-swatch").data(o).join("rect").attr("class",t=>"sota-gen-legend-swatch "+N(t)).attr("x",a).attr("y",(t,a)=>(A+$)*a).attr("width",C).attr("height",A),n.selectAll(".sota-gen-legend-text").data(o).join("text").attr("class","sota-gen-legend-text sota-text-label").text(t=>t).attr("x",a+C+B).attr("y",(t,a)=>(A+$)*a+A/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),E=o.length*A+(o.length-1)*$+j}else{let a=S-(t.sum(e,t=>t)+o.length*(C+B)+(o.length-1)*k);n.selectAll(".sota-gen-legend-swatch").data(o).join("rect").attr("class",t=>"sota-gen-legend-swatch "+N(t)).attr("x",(n,s)=>a+s*(C+B+k)+t.sum(e.slice(0,s),t=>t)).attr("y",0).attr("width",C).attr("height",A),n.selectAll(".sota-gen-legend-text").data(o).join("text").attr("class","sota-gen-legend-text sota-text-label").text(t=>t).attr("x",(n,s)=>a+s*(C+B+k)+C+B+t.sum(e.slice(0,s),t=>t)).attr("y",A/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),E=A+j}}else{O=W.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(h).tickSize(0)).attr("transform",`translate(0 ${u})`);const a=O.selectAll("text"),e=a.nodes();for(let t in e){if(t==e.length-1)continue;let a=e[+t].getBBox(),n=e[+t+1].getBBox();if(a.x+a.width>n.x){V=!0;break}}V&&a.attr("text-anchor","end").style("transform",`translateY(4px) rotate(-${y}deg)`).node().classList.add("angled-label")}W.append("g").attr("class","sota-gen-axis sota-gen-yAxis sota-num-axis").call(t.axisLeft(I).tickSize(-v));if(W.selectAll(".sota-columnChart-bar").data(c).join("rect").attr("class",(t,a)=>{let e="sota-columnChart-bar sota-gen-bar";return e+=f?" "+N(o[a]):"",e}).attr("x",(t,a)=>h(o[a])).attr("y",t=>I(t)).attr("width",h.bandwidth()).attr("height",t=>u-I(t)).call(l,z,e,o,s),f)u+=E;else if(V){let a=[];const e=O.select("text").node().getBBox(),n=e.y,s=e.height;O.selectAll("text").each((function(){a.push(this.getBBox().width)}));const l=t.max(a)*Math.sin(y*Math.PI/180),o=s*Math.cos(y*Math.PI/180);u+=n+l+o}else{let a=[];O.selectAll("text").each((function(){a.push(this.getBBox().y+this.getBBox().height)})),u+=+t.max(a)}let Y=u+b.top+b.bottom;M.style("width",S+2*w+"px").attr("height",Y).style("margin-left",-w+"px"),W.attr("transform",`translate(${b.left+w} ${b.top+E})`).attr("width",P),i(L.node())})},groupedBarChart:function({dataFile:a,selector:n=!1,title:l=!1,subtitle:r=!1,section:c=!1,totalResp:h=null,inputIsPercentage:d=!1,displayPercentage:g=!0,minVal:p=0,maxVal:m=null,margin:x=e.margin}){const u=e.groupedBarChart.barHeight,f=e.groupedBarChart.barMargin,b=e.overflowOffset,w=e.groupLabelMargin,v=(e.swatch.between,e.swatch.right,e.swatch.width,e.swatch.height,e.swatch.belowBetween,e.swatch.below,e.xAxisTop),{container:y,svg:B,tooltip:k,width:C,mainWidth:A,mainChart:$}=o(n,c,l,r,x,b);t.csv(a+".csv").then(a=>{window.wow=a;const e=a.columns.splice(1),l=t.map(a,t=>t.group).keys(),o=t.map(a,a=>{let n=[];for(let t of e)n.push(+a[t]);return t.max(n)}).keys(),r=t.max(o,t=>+t);if(null==m)m=d||g?100:r;else if(isNaN(m)||""===m)throw"invalid maxVal for graph on "+n;const c=u+f,j=c*e.length;let L=(j+w)*a.length;const M=t.scaleLinear().domain([p,m]).range([0,A]),z=t.scaleOrdinal().domain(t.map(a,t=>t.group)).range(t.map(a,(t,a)=>(j+w)*a).keys()),S=t.scaleOrdinal().domain(e).range(t.map(e,(t,a)=>c*a).keys());$.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-groupedBarChart-xAxis sota-num-axis").call(t.axisBottom(M).tickSize(-(L+v))).attr("transform","translate(0 "+(L+v)+")");L+=20+v;const P=$.selectAll(".sota-groupedBarChart-group").data(a).join("g").attr("class","sota-groupedBarChart-group").attr("transform",(t,a)=>`translate(0 ${z(t.group)})`),W=t.scaleOrdinal().domain(e).range(t.map(e,(t,a)=>"sota-fill-"+(a+1)).keys());P.selectAll(".sota-gen-bar").data(t=>{let a=[];for(let n of e)a.push(+t[n]);return a}).join("rect").attr("class",(t,a)=>"sota-gen-bar "+W(e[a])).attr("y",(t,a)=>+S(e[a])+ +w).attr("x",0).attr("width",(t,a)=>M(d?t:t/h[e[a]]*100)).attr("height",u).on("mouseover",(function(a,n){t.select(this).attr("opacity",.8),k.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"><span class="sota-heavy-label">${e[n]}</span><br/>Percentage: ${s(d?a:a/h[e[n]]*100)}`;return d||(t+="<br/>Number of responses: "+a),t+="</span>",t}).style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",()=>{k.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),k.style("opacity",0)})),$.selectAll(".sota-gen-groupLabel").data(l).join("text").attr("class","sota-gen-groupLabel sota-text-label sota-heavy-label").text(t=>t).attr("alignment-baseline","bottom").attr("x",0).attr("y",t=>+z(t)+ +w).attr("transform","translate(0 -8)");let I=L+x.top+x.bottom;B.style("width",C+2*b+"px").attr("height",I).style("margin-left",-b+"px"),$.attr("transform",`translate(${x.left+b} ${x.top})`).attr("width",A),i(y.node())})},stackedColumnChart:function({dataFile:a,selector:n=!1,title:l=!1,subtitle:r=!1,section:c=!1,inputIsPercentage:h=!1,displayPercentage:d=!0,maxVal:g=null,minVal:p=null,mainHeight:m=e.mainHeight,margin:x={top:20,bottom:20,left:24,right:0}}){const u=e.tickSize,f=e.separatorStrokeWidth,b=e.overflowOffset,w=e.labelAngle,v=e.swatch.between,y=e.swatch.right,B=e.swatch.width,k=e.swatch.height,C=e.swatch.belowBetween,A=e.swatch.below,{container:$,svg:j,tooltip:L,width:M,mainWidth:z,mainChart:S}=o(n,c,l,r,x,0);t.csv(a+".csv").then(a=>{const e=a.columns.slice(1),l=t.map(a,t=>t.group).keys();var o=[];h?a.forEach(t=>{let a=0,n=[];for(let s of e){let e=+t[s];n.push([e,a]),a+=e}o.push(n)}):a.forEach(a=>{let n=0,s=t.sum(e,t=>+a[t]),l=[];for(let t of e){let e=+a[t]/s*100;l.push([e,n,+a[t]]),n+=e}o.push(l)});const r=d||h?o:a.map(t=>+t.value);if(null===p)p=h||d?0:t.min(r);else if(!0===p)p=t.min(r);else if(isNaN(p)||""===p)throw"invalid minVal for graph on "+n;if(null===g)g=h||d?100:t.max(r);else if(!0===g)g=t.max(r);else if(isNaN(g)||""===g)throw"invalid maxVal for graph on "+n;const c=t.scaleBand().domain(l).range([0,z]).padding([.3]),P=t.scaleLinear().domain([p,g]).range([m,0]),W=t.scaleOrdinal().domain(e).range(t.map(e,(t,a)=>"sota-fill-"+(e.length>3?a+1:2*a+1)).keys()),I=(S.append("g").attr("class","sota-gen-axis sota-gen-yAxis sota-num-axis").call(t.axisLeft(P).tickSize(-u)),S.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(c).tickSize(0)).attr("transform",`translate(0 ${m})`));let N=!1;const O=I.selectAll("text"),E=O.nodes();for(let t in E){if(t==E.length-1)continue;let a=E[+t].getBBox(),e=E[+t+1].getBBox();if(a.x+a.width>e.x){N=!0;break}}N&&O.attr("text-anchor","end").style("transform",`translateY(4px) rotate(-${w}deg)`).node().classList.add("angled-label");let V=0,Y=[];const F=j.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${x.top})`);if(F.selectAll("nothing").data(e).enter().append("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(function(){Y.push(this.getBBox().width)})).remove(),t.sum(Y,t=>t)+Y.length*(B+v)+(Y.length-1)*y>z){let a=M+b-t.max(Y)-B-v;F.selectAll(".sota-gen-legend-swatch").data(e).join("rect").attr("class",t=>"sota-gen-legend-swatch "+W(t)).attr("x",a).attr("y",(t,a)=>(k+C)*a).attr("width",B).attr("height",k),F.selectAll(".sota-gen-legend-text").data(e).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",a+B+v).attr("y",(t,a)=>(k+C)*a+k/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),V=e.length*k+(e.length-1)*C+A}else{let a=M+b-(t.sum(Y,t=>t)+e.length*(B+v)+(e.length-1)*y);F.selectAll(".sota-gen-legend-swatch").data(e).join("rect").attr("class",t=>"sota-gen-legend-swatch "+W(t)).attr("x",(e,n)=>a+n*(B+v+y)+t.sum(Y.slice(0,n),t=>t)).attr("y",0).attr("width",B).attr("height",k),F.selectAll(".sota-gen-legend-text").data(e).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,n)=>a+n*(B+v+y)+B+v+t.sum(Y.slice(0,n),t=>t)).attr("y",k/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),V=k+A}const H=S.selectAll(".sota-stackedColumnChart-group").data(o).join("g").attr("class","sota-stackedColumnChart-group").attr("transform",(t,a)=>"translate("+c(l[a])+" 0)");if(H.selectAll(".sota-stackedColumnChart-bar").data(t=>t).join("rect").attr("class",(t,a)=>"sota-stackedColumnChart-bar "+W(a)).attr("x",0).attr("y",t=>P(t[0]+t[1])).attr("width",c.bandwidth()).attr("height",t=>m-P(t[0])).on("mouseover",(function(a,n){t.select(this).attr("opacity",.8),L.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"><span class="sota-heavy-label">${e[n]}</span><br/>Percentage: ${s(a[0])}`;return h||(t+="<br/>Number of responses: "+a[2]),t+="</span>",t}).style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",()=>{L.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),L.style("opacity",0)})),H.selectAll(".sota-stackedColumnChart-separator").data(t=>t).join("rect").attr("class","sota-stackedColumnChart-separator").attr("fill","white").attr("x",0).attr("y",(t,a)=>P(t[0])+P(t[1])-m).attr("height",t=>t[0]>0?f:0).attr("width",c.bandwidth()),m+=V,N){let a=[];const e=I.select("text").node().getBBox(),n=e.y,s=e.height;I.selectAll("text").each((function(){a.push(this.getBBox().width)}));const l=t.max(a)*Math.sin(w*Math.PI/180),o=s*Math.cos(w*Math.PI/180);m+=n+l+o}else{let a=[];I.selectAll("text").each((function(){a.push(this.getBBox().y+this.getBBox().height)})),m+=+t.max(a)}let G=m+x.top+x.bottom+V;j.style("width",M+2*b+"px").attr("height",G).style("margin-left",-b+"px"),S.attr("transform",`translate(${x.left+b} ${x.top+V})`).attr("width",z),i($.node())})},customColumnChart:function({dataFile:a,selector:n=!1,title:s=!1,subtitle:c=!1,section:h=!1,shapeFile:d,shapeHeight:g=300,inputIsPercentage:p=!1,margin:m=e.margin}){const{container:x,svg:u,tooltip:f,width:b,mainWidth:w,mainChart:v}=o(n,h,s,c,m,0),y=e.separatorStrokeWidth;t.xml("shapes/"+d+".svg").then(e=>{let s=document.importNode(e.documentElement,!0),o=t.select(s).select("path").node(),c=0,h=0;u.append(()=>o).attr("class",(function(){return c=this.getBBox().width,h=this.getBBox().height,""})).remove();let d=g/h,w=c*d;u.append("defs").append("clipPath").attr("id","shapeDef"+n.substring(1)).append(()=>o).attr("transform",`scale(${d})`),t.csv(a+".csv").then(a=>{const[e,s,o]=r(a,p);let i=0,c=[];for(let t of a)c.push(i),i+=+t.value;const h=t.scaleLinear().domain([0,t.sum(a,t=>+t.value)]).range([0,g]),d=t.scaleOrdinal().domain(o).range(t.map(o,(t,a)=>"sota-fill-"+(a+1)).keys());v.selectAll(".sota-customColumnChart-bar").data(a).join("rect").attr("class",t=>"sota-customColumnChart-bar "+d(t.label)).attr("x",0).attr("y",(t,a)=>h(c[a])).attr("width",w).attr("height",t=>h(t.value)).attr("clip-path","url(#shapeDef"+n.substring(1)+")").call(l,f,e,o,s),v.selectAll(".sota-customColumnChart-separator").data(a).join("rect").attr("class","sota-customColumnChart-separator").attr("x",0).attr("y",(t,a)=>0==a?-y:h(c[a])).attr("width",w).attr("height",y).attr("fill","white").attr("clip-path","url(#shapeDef"+n.substring(1)+")");const x=g+m.top+m.bottom;u.attr("height",x),v.attr("transform",`translate(${m.left} ${m.top})`).attr("width",b-m.left-m.right)}),i(x.node())})},multiLineGraph:function({dataFile:a,selector:n=!1,title:s=!1,subtitle:l=!1,section:r=!1,height:c=300,showLegend:h=!0,inputIsPercentage:d=!1,margin:g={top:20,bottom:20,left:24,right:0}}){const p=e.overflowOffset,m=e.swatch.between,x=e.swatch.right,u=e.swatch.width,f=e.swatch.height,b=e.swatch.belowBetween,w=e.swatch.below,{container:v,svg:y,tooltip:B,width:k,mainWidth:C,mainChart:A}=o(n,r,s,l,g,p),$=c-g.top-g.bottom;t.csv(a+".csv").then(a=>{const e=a.columns.slice(1),n=t.map(a,t=>t.group).keys(),s=t.scaleBand().domain(e).range([0,C]),l=t.scaleLinear().domain([0,50]).range([$,0]);var o=[];d?a.forEach(t=>{let a=[];for(let n of e)a.push(+t[n]);o.push(a)}):a.forEach(a=>{let n=t.sum(e,t=>+a[t]),s=[];for(let t of e){let e=+a[t]/n*100;s.push([e,+a[t]])}o.push(s)});const r=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>"sota-fill-"+(n.length>3?a+1:2*a+1)).keys()),B=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>"sota-stroke-"+(n.length>3?a+1:2*a+1)).keys());let j=0;if(h){let a=[];const e=y.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${g.top})`);if(e.selectAll("nothing").data(n).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t).attr("x",(function(){a.push(this.getBBox().width)})).remove(),t.sum(a,t=>t)+n.length*(u+m)+(n.length-1)*x>C){let s=k+p-t.max(a)-u-m;e.selectAll(".sota-gen-legend-swatch").data(n).join("rect").attr("class",t=>"sota-gen-legend-swatch "+r(t)).attr("x",s).attr("y",(t,a)=>(f+b)*a).attr("width",u).attr("height",f),e.selectAll(".sota-gen-legend-text").data(n).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",s+u+m).attr("y",(t,a)=>(f+b)*a+f/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),j=n.length*f+(n.length-1)*b+w}else{let s=k+p-(t.sum(a,t=>t)+n.length*(u+m)+(n.length-1)*x);e.selectAll(".sota-gen-legend-swatch").data(n).join("rect").attr("class",t=>"sota-gen-legend-swatch "+r(t)).attr("x",(e,n)=>s+n*(u+m+x)+t.sum(a.slice(0,n),t=>t)).attr("y",0).attr("width",u).attr("height",f),e.selectAll(".sota-gen-legend-text").data(n).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,n)=>s+n*(u+m+x)+u+m+t.sum(a.slice(0,n),t=>t)).attr("y",f/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),j=f+w}}A.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(s).ticks(a.length).tickSize(-8)).style("transform","translateY("+$+"px)"),A.append("g").attr("class","sota-gen-axis sota-gen-YAxis sota-num-axis").call(t.axisLeft(l).tickSize(-8)),A.selectAll(".sota-multiLineGraph-group").data(o).join("g").attr("class",(t,a)=>"sota-multiLineGraph-group "+B(n[a])).selectAll(".sota-multiLineGraph-path").data(t=>[t]).join("path").attr("class","sota-multiLineGraph-path").attr("d",t.line().x((t,a)=>s(e[a])+s.bandwidth()/2).y(t=>l(t[0]))).attr("fill","none").style("stroke-width",3),c=$+j,y.style("width",k+2*p+"px").attr("height",c+j+"px").style("margin-left",-p+"px"),A.attr("transform",`translate(${g.left} ${g.top+j})`).attr("width",C),i(v.node())})},setColors:function(t){let a="";for(const e of t.sections){const t=e.slug;a+=`\n        #sota-section-${t}{\n            background-color: ${e.colors[0]};\n            color: ${e.colors[0]};\n        }\n        #sota-section-${t} .sota-gen-bar, .sota-section-${t} .sota-gen-bar{\n            fill: ${e.colors[3]};\n        }      \n        #sota-navbar #sota-navbar-item-${t}:hover, #sota-navbar #sota-navbar-item-${t}.selected{\n            background-color: ${e.colors[0]};            \n        }\n        @media (max-width: 1400px){\n            #sota-navbar #sota-navbar-item-${t}{\n                background-color: ${e.colors[0]};            \n            }        \n        }\n        `;for(const n in e.colors)a+=`\n        #sota-section-${t} .sota-fill-${+n+1}, .sota-section-${t} .sota-fill-${+n+1}{\n            fill: ${e.colors[n]};\n        }\n        #sota-section-${t} .sota-stroke-${+n+1}, .sota-section-${t} .sota-stroke-${+n+1}{\n            stroke: ${e.colors[n]};\n        }\n        `}document.head.appendChild(document.createElement("style")).textContent=a},setStyles:function(t=e){const a=t.numberFont,n=t.labelFont,s=t.separatorStrokeWidth,l=t.lineColor;let o=`\n.sota-section {\n\tpadding: 48px 0;\n\twidth: 100%\n}\n\n.sota-section > p{\n  color: #fff;\n  font-family: ${n};\n  line-height: 1.5;\n  max-width: 800px;\n  margin: 64px auto;\n  padding: 0 24px;\n}\n\n.sota-section h1 {\n\tfont-size: 56px;\n\tfont-family: ${a}, sans-serif;\n\ttext-transform: uppercase;\n\tfont-weight: 700;\n\ttext-align: center;\n\tcolor: #fff\n}\n\n.sota-section-inner {\n    position: relative;\n\tmax-width: 1500px;\n\tbox-sizing: border-box;\n\tfont-family: "Montserrat", Arial, sans-serif;\n\twidth: 100%;\n\tpadding: 48px 24px;\n\tmargin: 0 auto;\n\tbackground-color: #fff;\n\tgrid-template-columns: minmax(0, 1fr)\n}\n\n.sota-section-inner:before{\n    pointer-events: none;\n    content: "";\n    position: absolute;\n    left: 0;\n    top: 32px;\n    display: none;\n    height: calc(100% - 64px);\n}\n\n.sota-section-inner:after{\n    content: "";\n    clear: both;\n    display: table;    \n}\n\n.sota-section .sota-module {\n\tposition: absolute;\n\tfloat: left;\n\twidth: calc(100% - 48px);\n\tborder-bottom: 1px solid rgba(0,0,0,0.2);\n\tpadding-bottom: 32px;\n\tmargin-bottom: 32px;\n}\n\n@media (min-width: 800px) {\n    .sota-section-inner:before{\n      width: 50%;\n      display: block;\n        border-right: 1px solid rgba(0,0,0,0.1);\n    }\n    \n    .sota-section .sota-module {\n        width: calc(50% - 48px);\n    }\n}\n\n@media (min-width: 1200px) {    \n    .sota-section .sota-module {\n        width: calc(33% - 48px);\n    }\n\n    .sota-section-inner:before{\n        width: 33.3%;\n        left: 33.3%;\n        border-left: 1px solid rgba(0,0,0,0.1);\n    }\n}\n\n.sota-module>svg {\n\twidth: 100%\n}\n\n.sota-module h3 {\n\tfont-family: ${a}, sans-serif;\n\tfont-weight: 700;\n\ttext-transform: uppercase;\n\tline-height: 1.1;\n}\n\n.sota-module p, ul, ol{\n    font-size: 20px;\n    line-height: 1.4;\n    font-family: ${n};\n}\n\n.sota-module img{\n    max-width: 100%;\n    margin: 32px 0;\n}\n\n.sota-module .subtitle {\n\tfont-family: ${n}, serif;\n\topacity: 0.4;\n\tline-height: 1.1;\n}\n\n.sota-heavy-label{\n    font-weight: 700;\n}\n\n.sota-num-label, .sota-num-axis .tick text{\n    font-family: "Montserrat", sans-serif;\n    font-size: 14px;\n    fill: ${e.labelColor};\n}\n\n.sota-text-label, .sota-text-axis .tick text{\n    font-family: ${n}, serif;\n    fill: black;\n}\n\n.sota-num-label.sota-stackedBarChart-label-onBar{\n    fill: rgba(255,255,255,0.6);\n}\n\n.sota-tooltip {\n\tbackground-color: #222;\n\tcolor: #fff;\n\tpadding: 12px;\n\tposition: absolute;\n\tpointer-events: none;\n\topacity: 0;\n\ttransform: translate(-50%, -100%);\n\twhite-space: nowrap\n}\n\n.sota-gen-axis{\n    opacity: 0.4;\n}\n\n.sota-gen-axis.sota-gen-xAxis .tick text {\n\ttransform: translateY(4px);\n}\n\n.sota-gen-axis.sota-gen-yAxis .tick text {\n\ttransform: translateX(-8px);\n\ttext-anchor: end\n}\n\n.sota-gen-xAxis:not(.sota-text-axis) g.tick:first-of-type text:not(.angled-label){\n    text-anchor: start;\n}\n\n.sota-gen-xAxis:not(.sota-text-axis) g.tick:last-of-type text:not(.angled-label){\n    text-anchor: end;\n}\n\n.sota-gen-axis .tick line,\n.sota-gen-axis path.domain {\n\tstroke-width: ${s}px;\n\tstroke: ${l};\n}\n\n.sota-groupedBarChart-xAxis .tick line {\n\topacity: 0.2\n}\n\n.sota-big {\n\tfont-weight: 700;\n\tfont-size: 96px;\n\tline-height: 1.0;\n\tmargin-top: -8px;\n\tfont-family: ${n}, serif\n}\n\n.sota-section-inner.hide .module{\n    border-bottom: none;\n}\n\n.sota-section-inner.hide .module > *{\n    visibility: hidden;\n}\n\n.sota-section-inner:not(.hide) .loading{\n    display: none;\n}\n\n#sota-navbar ~ .sota-section:before{\n    content: "";\n    z-index: 4;\n    position: sticky;\n    top: 64px;\n    width: 100%;\n    height: 8px;\n    background-color: inherit;\n    display: block;\n}\n\n#sota-navbar{\n    color: #fff;\n}\n\n#sota-navbar .sz-navbar-item a, #sota-navbar .sz-navbar-item span{\n    font-family: ${a};\n    line-height: 64px;\n    box-sizing: border-box;\n    text-align: center;\n    text-decoration: none;\n    color: #fff;\n    height: 64px;\n    padding: 0 8px;\n    display: block;\n}\n\n#sota-navbar .sota-navbar-logo, #sota-navbar .sota-navbar-logo a{\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n\n#sota-navbar .sota-navbar-logo img{\n    height: 50%;\n}\n\n@media (max-width: 1400px){\n    #sota-navbar .sz-navbar-items{\n        background-color: #000;\n        z-index: 4;\n        height: 100vh;\n        box-sizing: border-box;\n        justify-content: flex-start;\n    }\n\n    #sota-navbar div.sz-navbar-item{\n        width: 100%;\n        margin-bottom: 0;\n    }\n    \n    #sota-navbar .sz-navbar-inner > .sota-navbar-text{\n        display: none;\n    }\n}\n\n@media (min-width: 1400px){\n    #sota-navbar .sz-navbar-items{\n        margin-left: auto;\n    }\n\n    #sota-navbar .sz-navbar-item.sota-navbar-text{\n        display: none;\n    }\n    \n    #sota-navbar .sota-navbar-logo{\n        margin-right: 24px;\n    }\n}\n\n#sota-navbar .sota-navbar-text span{\n    font-family: ${n};\n    font-weight: 700;\n}\n\n    `;document.head.appendChild(document.createElement("style")).textContent=o,console.log("styles set")}};return c.sotaConfig=e,c.colorInterpolate=a,c.sotaMasonry=function(){document.querySelectorAll(".sota-section-inner").forEach(t=>{let a=0;const e=t.querySelectorAll(".sota-module svg").length;if(0===e){new Masonry(t,{itemSelector:".sota-module",columnWidth:".sota-module",gutter:48});return}const n=document.createElement("p");n.innerHTML="Loading...",n.classList.add("loading"),t.prepend(n),t.addEventListener("sotaChartRendered",()=>{if(a++,a===e){t.classList.remove("hide");new Masonry(t,{itemSelector:".sota-module",columnWidth:".sota-module",gutter:48})}})})},c.sotaNavbar=function(t,a="",e=!1,n=!1,s=!1){const l=document.getElementById("sota-navbar");l.classList.add("sz-navbar");let o='\n    <div class="sz-navbar-left sz-navbar-inner">\n      <input type="checkbox" id="sz-navbar-check">\n      <label for="sz-navbar-check" class="sz-navbar-hamburger">☰</label>';e&&(o+=s?`<div class="sota-navbar-logo"><a href="${s}"><img src="${e}" alt="Navbar logo"></a></div>`:`<div class="sota-navbar-logo"><img src="${e}" alt="Navbar logo"></div>`),o+=n?`<div class="sota-navbar-text"><span><a href="${n}"><${a}</a></span></div>`:`<div class="sota-navbar-text"><span>${a}</span></div>`,o+='<div class="sz-navbar-items">',o+=n?`<div class="sota-navbar-text sz-navbar-item"><span><a href="${n}"><${a}</a></span></div>`:`<div class="sota-navbar-text sz-navbar-item"><span>${a}</span></div>`;for(const a of t.sections)o+=`<div class="sz-navbar-item" id="sota-navbar-item-${a.slug}"><a href="#sota-section-${a.slug}">${a.name}</a></div>`;o+="</div>",l.innerHTML=o;const r=[];for(const a of t.sections)r.push(document.getElementById("sota-section-"+a.slug));function i(){if(window.innerWidth>600)for(const a in r){const e=r[a],n=t.sections[a],s=document.getElementById("sota-navbar-item-"+n.slug);window.scrollY>=e.offsetTop&&window.scrollY<e.offsetTop+e.offsetHeight?s.classList.add("selected"):s.classList.remove("selected")}}console.log(r),window.onload=()=>{i()},window.addEventListener("scroll",()=>{i()});const c=document.querySelectorAll("#sota-navbar .sz-navbar-item"),h=document.getElementById("sz-navbar-check");for(let t=0;t<c.length;t++)c[t].addEventListener("click",()=>{i(),h.checked=!1})},c.setParam=function(t,a){this.sotaConfig[t]=a},c.getParam=function(t){return this.sotaConfig[t]},c}));

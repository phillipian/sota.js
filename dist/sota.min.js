!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("d3")):"function"==typeof define&&define.amd?define(["d3"],a):(t=t||self).sota=a(t.d3)}(this,(function(t){"use strict";function a(t,a="#ffffff",e=8,n=!1){const s=t.substr(1),l=parseInt("0x"+s.substr(0,2)),o=parseInt("0x"+s.substr(2,2)),r=parseInt("0x"+s.substr(4,2)),i=a.substr(1),c=n?e:e+1,h=(parseInt("0x"+i.substr(0,2))-l)/c,d=(parseInt("0x"+i.substr(2,2))-o)/c,g=(parseInt("0x"+i.substr(4,2))-r)/c;let p,m=[t];for(let t=1;t<e-1;t++){const a=l+h*t,e=o+d*t,n=r+g*t,s="#"+Math.round(a).toString(16)+Math.round(e).toString(16)+Math.round(n).toString(16);m.push(s)}if(n)p=a;else{const t=l+h*e,a=o+d*e,n=r+g*e;p="#"+Math.round(t).toString(16)+Math.round(a).toString(16)+Math.round(n).toString(16)}return m.push(p),m}var e={numberFont:"Montserrat",labelFont:"Lora",sections:[{slug:"default",name:"Default",colors:a("#000000")}],separatorStrokeWidth:1,barHeight:32,barMargin:16,labelLeft:6,labelBelow:8,groupLabelMargin:32,legendMargin:24,xAxisTop:24,overflowOffset:24,lineColor:"#777777",labelColor:"#777777",mainHeight:300,tickSize:4,labelAngle:30,groupedBarChart:{barHeight:24,barMargin:8},margin:{top:20,bottom:20,left:0,right:0},swatch:{between:12,belowBetween:8,right:24,width:32,height:24,below:16}};function n(a){const e=a.node().offsetWidth/2,n=t.event.pageX;return n-e<0?e:n+e>window.innerWidth?window.innerWidth-e:n}function s(a){return t.format(".1f")(a)+"%"}function l(a,l,o,r,i){a.on("mouseover",(function(a,c){t.select(this).attr("opacity",e.hoverOpacity),l.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"></span><span class="sota-heavy-label">${r[c]}</span><br/>Percentage: ${s(o[c])}`;return i&&(t+="<br/>Number of responses: "+i[c]),t+="</span>",t}).style("left",n(l)+"px").style("top",t.event.pageY+"px")})).on("mousemove",a=>{l.style("left",n(l)+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),l.style("opacity",0)}))}function o(a,e,n=null){return n=null==n?t.sum(a,t=>+t.value):n,[e?a.map(t=>+t.value):a.map(t=>+t.value/n*100),!e&&a.map(t=>+t.value),a.map(t=>t.label)]}function r(t){const a=new Event("sotaChartRendered"),e=t.closest(".sota-section-inner");null!==e&&e.dispatchEvent(a)}let i={barChart:function({selector:a,dataFile:n,inputIsPercentage:i=!1,showXAxis:c=!0,showSeparators:h=!0,displayPercentage:d=!0,totalResp:g=null,maxVal:p=null,minVal:m=null,margin:f=e.margin}){const x=e.tickSize,u=e.separatorStrokeWidth,b=e.labelLeft,v=e.barHeight,w=e.barMargin,y=e.overflowOffset,B=e.xAxisTop,k=t.select(a),C=k.append("svg"),$=t.select("body").append("div").attr("class","sota-tooltip"),A=k.node().offsetWidth,j=A-f.left-f.right,L=C.append("g").attr("class","sota-barChart-mainChart").attr("transform",`translate(${f.left+y} ${f.right})`).attr("width",j);t.csv(n+".csv").then(e=>{const n=v+w;let S=e.length*n;const[M,z,P]=o(e,i,g),I=d||i?M:z;if(null==m)m=i||d?0:t.min(I);else if(!0===m)m=t.min(I);else if(isNaN(m)||""===m)throw"invalid minVal for graph on "+a;if(null==p)p=i||d?100:t.max(I);else if(!0===p)p=t.max(I);else if(isNaN(p)||""===p)throw"invalid maxVal for graph on "+a;const N=t.scaleLinear().domain([m,p]).range([0,j]);let W;function E(t){return t*n}if(c&&(W=L.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-num-axis").call(t.axisBottom(N).tickSize(-x)).attr("transform","translate(0 "+(S+B)+")")),L.selectAll(".sota-barChart-bar").data(I).join("rect").attr("class","sota-barChart-bar sota-gen-bar").attr("width",t=>N(t)).attr("height",v).attr("x",0).attr("y",(t,a)=>E(a)),L.selectAll(".sota-barChart-hiddenBar").data(I).join("rect").attr("class","sota-barChart-hiddenBar").attr("width",j).attr("height",v).attr("x",0).attr("y",(t,a)=>E(a)).attr("fill","transparent").call(l,$,M,P,z),L.selectAll(".sota-barChart-label").data(e).join("text").attr("class","sota-barChart-label sota-text-label sota-heavy-label").html(t=>t.label).attr("alignment-baseline","central").attr("dominant-baseline","central").attr("x",b).attr("y",(t,a)=>E(a)+v/2),h&&L.selectAll(".sota-barChart-separator").data(I).join("line").attr("class","sota-barChart-separator").attr("x1",0).attr("x2",j).attr("y1",(t,a)=>E(a)+v+6).attr("y2",(t,a)=>E(a)+v+6).attr("stroke-width",u).attr("stroke","#dddddd"),L.selectAll(".sota-barChart-value").data(I).join("text").attr("class","sota-barChart-value sota-num-label").html((t,a)=>i||d?s(t):t).attr("alignment-baseline","central").attr("dominant-baseline","central").attr("text-anchor","end").attr("x",j).attr("y",(t,a)=>E(a)+v/2),c){let a=[];W.selectAll("text").each((function(){a.push(this.getBBox().y+this.getBBox().height)})),S+=+t.max(a)}const O=S+f.top+f.bottom;C.style("width",A+2*y+"px").attr("height",O).style("margin-left",-y+"px"),r(k.node())})},pieChart:function({selector:a,dataFile:n,inputIsPercentage:i=!1,sorted:c=!0,pieRad:h=150,pieThick:d=80,margin:g=e.margin}){const p=e.lineColor,m=e.separatorStrokeWidth,f=e.separatorStrokeWidth,x=e.swatch.between,u=e.swatch.right,b=e.swatch.width,v=e.swatch.height,w=e.swatch.belowBetween,y=e.swatch.below,B=e.legendMargin,k=e.overflowOffset,C=t.select(a),$=C.append("svg"),A=t.select("body").append("div").attr("class","sota-tooltip"),j=C.node().offsetWidth,L=j-g.left-g.right,S=$.append("g").attr("class","sota-barChart-mainChart").attr("transform",`translate(${g.left+k} ${g.top})`).attr("width",L);L<2*h&&(h=L/2),d>h&&(d=50),t.csv(n+".csv").then(a=>{const[e,n,M]=o(a,i),z=(c?t.pie():t.pie().sort(null))(e);let P=0,I=[];const N=t.scaleOrdinal().domain(M).range(t.map(M,(t,a)=>"sota-fill-"+(M.length>3?a+1:2*a+1)).keys()),W=S.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${g.top})`);if(W.selectAll("nothing").data(a).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t.label).attr("x",(function(){I.push(this.getBBox().width)})).remove(),t.sum(I,t=>t)+M.length*(b+x)+(M.length-1)*u>L){let a=L-t.max(I)-b-x;W.selectAll(".sota-gen-legend-swatch").data(M).join("rect").attr("class",t=>"sota-gen-legend-swatch "+N(t)).attr("x",a).attr("y",(t,a)=>(v+w)*a).attr("width",b).attr("height",v),W.selectAll(".sota-gen-legend-text").data(M).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",a+b+x).attr("y",(t,a)=>(v+w)*a+v/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),P=M.length*v+(M.length-1)*w+y+B}else{let a=L-(t.sum(I,t=>t)+M.length*(b+x)+(M.length-1)*u);W.selectAll(".sota-gen-legend-swatch").data(M).join("rect").attr("class",t=>"sota-gen-legend-swatch "+N(t)).attr("x",(e,n)=>a+n*(b+x+u)+t.sum(I.slice(0,n),t=>t)).attr("y",0).attr("width",b).attr("height",v),W.selectAll(".sota-gen-legend-text").data(M).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,n)=>a+n*(b+x+u)+b+x+t.sum(I.slice(0,n),t=>t)).attr("y",v/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),P=v+y+B}const E=S.append("g").attr("transform","translate("+L/2+","+(h+P)+")"),O=t.arc().innerRadius(.8*h-.8*d).outerRadius(.8*h),V=t.arc().innerRadius(.9*h).outerRadius(.9*h);E.selectAll(".sota-pieChart-slice").data(z).join("path").attr("class",(t,a)=>"sota-pieChart-slice "+N(a)).attr("d",O).attr("stroke","#fff").style("stroke-width",f).call(l,A,e,M,n);let Y=!1;E.selectAll(".sota-pieChart-polyline").data(z).join("polyline").attr("class","sota-pieChart-polyline").attr("stroke",p).style("fill","none").attr("stroke-width",m).attr("points",(t,a)=>{let e=O.centroid(t),n=V.centroid(t),s=V.centroid(t);const l=V.centroid(t),o=a>0&&V.centroid(z[a-1]),r=(t.endAngle+t.startAngle)/2<Math.PI;return a>0&&Math.sign(l[0])==Math.sign(o[0])&&Math.abs(o[1]-l[1])<20?(s[0]=.95*h*((Y?r:!r)?1:-1),Y=!0):(s[0]=.95*h*((Y?!r:r)?1:-1),Y=!1),[e,n,s]}),Y=!1,E.selectAll(".sota-pieChart-label").data(z).join("text").attr("class","sota-pieChart-label sota-num-label").text((t,a)=>s(e[a])).attr("alignment-baseline","central").attr("dominant-baseline","central").attr("transform",(t,a)=>{const e=V.centroid(t),n=a>0&&V.centroid(z[a-1]),s=(t.endAngle+t.startAngle)/2<Math.PI;return a>0&&Math.sign(e[0])==Math.sign(n[0])&&Math.abs(n[1]-e[1])<20?(e[0]=.99*h*((Y?s:!s)?1:-1),Y=!0):(e[0]=.99*h*((Y?!s:s)?1:-1),Y=!1),a==z.length-1&&(Y=!1),"translate("+e+")"}).style("text-anchor",(t,a)=>{const e=V.centroid(t),n=a>0&&V.centroid(z[a-1]),s=(t.endAngle+t.startAngle)/2<Math.PI;if(a>0&&Math.sign(e[0])==Math.sign(n[0])&&Math.abs(n[1]-e[1])<20){const t=(Y?s:!s)?"start":"end";return Y=!0,t}{const t=(Y?!s:s)?"start":"end";return Y=!1,t}});const F=2*h+P+g.top+g.bottom;$.style("width",j+2*k+"px").attr("height",F).style("margin-left",-k+"px"),r(C.node())})},lineGraph:function({selector:a,dataFile:n,inputIsPercentage:l=!1,minVal:o=null,maxVal:i=null,height:c=300,customTooltipAppend:h="",prop5:d="value5",prop6:g="value6",margin:p={top:20,bottom:20,left:24,right:0}}){const m=e.separatorStrokeWidth,f=e.overflowOffset,x=t.select(a),u=x.append("svg"),b=t.select("body").append("div").attr("class","sota-tooltip"),v=x.node().offsetWidth,w=v-p.left-p.right;console.log(v,w);const y=u.append("g").attr("class","sota-lineGraph-mainChart").attr("transform",`translate(${p.left+f} ${p.right})`).attr("width",w);t.csv(n+".csv").then(e=>{const n=e.map(t=>t.label),h=e.map(t=>+t.value);if(null==o)o=l?0:t.min(e,t=>t.value);else if(1==o)o=t.min(e,t=>t.value);else if(isNaN(o)||""==o)throw"invalid minVal for graph on "+a;if(null==i)i=l?100:t.max(e,t=>t.value);else if(1==i)i=t.max(e,t=>t.value);else if(isNaN(i)||""==i)throw"invalid maxVal for graph on "+a;const d=t.scaleBand().domain(n.map(t=>t)).range([0,w]),g=t.scaleLinear().domain([o,i]).range([c-p.bottom,p.top]);y.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(d).ticks(e.length).tickSize(-8)).style("transform","translateY("+(c-p.bottom)+"px)"),y.append("g").attr("class","sota-gen-axis sota-gen-YAxis sota-num-axis").call(t.axisLeft(g).tickSize(-8)),y.selectAll(".sota-lineGraph-path").data([h]).join("path").attr("class","sota-lineGraph-path").attr("d",t.line().x((t,a)=>d(n[a])+d.bandwidth()/2).y(t=>g(t))).attr("fill","none").attr("stroke","#bbb").style("stroke-width",3),y.selectAll(".sota-lineGraph-circle").data(h).join("circle").attr("class","sota-lineGraph-circle").attr("cx",(t,a)=>d(n[a])+d.bandwidth()/2).attr("cy",t=>g(t)).attr("r",4).attr("stroke","white").style("stroke-width",m).on("mouseover",(function(a,e){t.select(this).attr("opacity",.8),b.style("opacity",1).html(`<span class="sota-tooltip-label">${n[e]}</span><br/>Value: `+(l?s(a):a)+"</span>").style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",a=>{b.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),b.style("opacity",0)})),y.selectAll(".sota-lineGraph-label").data(h).join("text").attr("class","sota-lineGraph-label sota-num-label").text((t,a)=>{if(l)return t+"%"}).attr("x",(t,a)=>d(n[a])+d.bandwidth()/2).attr("y",t=>g(t)-16).style("text-anchor","middle"),u.style("width",v+2*f+"px").attr("height",c).style("margin-left",-f+"px"),r(x.node())})},stackedBarChart:function({selector:a,dataFile:n,inputIsPercentage:l=!1,showXAxis:o=!0,labelStyle:i="onBar",groupLabelStyle:c="none",showLegend:h=!0,prop5:d="value5",prop6:g="value6",margin:p=e.margin}){const m=e.separatorStrokeWidth,f=e.barHeight,x=e.barMargin,u=e.overflowOffset,b=e.groupLabelMargin,v=e.labelLeft,w=e.labelBelow,y=e.lineColor,B=e.swatch.between,k=e.swatch.right,C=e.swatch.width,$=e.swatch.height,A=e.swatch.belowBetween,j=e.swatch.below,L=e.xAxisTop;var S=t.select(a),M=S.append("svg"),z=t.select("body").append("div").attr("class","sota-tooltip"),P=document.querySelector(a).offsetWidth,I=P-p.left-p.right;const N=M.append("g").attr("class","sota-stackedBarChart-mainChart").attr("transform",`translate(${p.left+u} ${p.right})`).attr("width",I);t.csv(n+".csv").then(a=>{var e=f+x,n=a.length*e,d=0;"onBar"==c&&(e+=a.length*b,n+=a.length*b,d=b);const g=a.columns.slice(1),W=t.map(a,t=>t.group).keys();var E=[];l?a.forEach(t=>{let a=0,e=[];for(let n of g){let s=+t[n];e.push([s,a]),a+=s}E.push(e)}):a.forEach(a=>{let e=0,n=t.sum(g,t=>+a[t]),s=[];for(let t of g){let l=+a[t]/n*100;s.push([l,e,+a[t]]),e+=l}E.push(s)});const O=t.scaleBand().domain(W).range([0,n]).padding([.2]),V=t.scaleLinear().domain([0,100]).range([0,I]),Y=t.scaleOrdinal().domain(g).range(t.map(g,(t,a)=>"sota-fill-"+(g.length>3?a+1:2*a+1)).keys());o&&(N.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-num-axis").call(t.axisBottom(V).ticks(a.length).tickSize(-8)).attr("transform","translate(0 "+(n+L)+")"),n+=20+L);var F=0;if(h){let a=[];const e=M.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${p.top})`);if(e.selectAll("nothing").data(g).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t).attr("x",(function(){a.push(this.getBBox().width)})).remove(),t.sum(a,t=>t)+g.length*(C+B)+(g.length-1)*k>I){let n=P+u-t.max(a)-C-B;e.selectAll(".sota-gen-legend-swatch").data(g).join("rect").attr("class",t=>"sota-gen-legend-swatch "+Y(t)).attr("x",n).attr("y",(t,a)=>($+A)*a).attr("width",C).attr("height",$),e.selectAll(".sota-gen-legend-text").data(g).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",n+C+B).attr("y",(t,a)=>($+A)*a+$/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),F=g.length*$+(g.length-1)*A+j}else{let n=P+u-(t.sum(a,t=>t)+g.length*(C+B)+(g.length-1)*k);e.selectAll(".sota-gen-legend-swatch").data(g).join("rect").attr("class",t=>"sota-gen-legend-swatch "+Y(t)).attr("x",(e,s)=>n+s*(C+B+k)+t.sum(a.slice(0,s),t=>t)).attr("y",0).attr("width",C).attr("height",$),e.selectAll(".sota-gen-legend-text").data(g).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,s)=>n+s*(C+B+k)+C+B+t.sum(a.slice(0,s),t=>t)).attr("y",$/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),F=$+j}}const H=N.selectAll(".sota-stackedBarChart-group").data(E).join("g").attr("class","sota-stackedBarChart-group").attr("transform",(t,a)=>"translate(0 "+(O(W[a])+d-x)+")");H.selectAll(".sota-stackedBarChart-bar").data(t=>t).join("rect").attr("class",(t,a)=>"sota-stackedBarChart-bar "+Y(a)).attr("x",t=>V(t[1])).attr("y",0).attr("width",t=>V(t[0])).attr("height",f).on("mouseover",(function(a,e){t.select(this).attr("opacity",.8),z.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"><span class="sota-heavy-label">${g[e]}</span><br/>Percentage: ${s(a[0])}`;return l||(t+="<br/>Number of responses: "+a[2]),t+="</span>",t}).style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",()=>{z.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),z.style("opacity",0)})),H.selectAll(".sota-stackedBarChart-separator").data(t=>t).join("rect").attr("class","sota-stackedBarChart-separator").attr("fill","white").attr("x",t=>V(t[1])+V(t[0])).attr("y",0).attr("width",t=>t[0]>0?m:0).attr("height",f),"onBar"==c&&N.selectAll(".sota-stackedBarChart-groupLabel-onBar").data(W).join("text").attr("class","sota-stackedBarChart-groupLabel-onBar sota-text-label sota-heavy-label").text(t=>t).attr("alignment-baseline","bottom").attr("x",0).attr("y",t=>O(t));var G=0;if("onBar"==i)H.selectAll(".sota-stackedBarChart-label-onBar").data(t=>t).join("text").attr("class","sota-stackedBarChart-label-onBar sota-num-label").text(a=>t.format(".1f")(a[0])+"%").attr("alignment-baseline","central").attr("dominant-baseline","central").attr("text-anchor","end").attr("x",t=>V(t[1])+V(t[0])-v).attr("y",f/2).style("display",(function(t,a){return this.getBBox().x<(a>0?V(t[1]):p.left)?"none":""}));else if("aboveBar"==i){var X=[];H.selectAll(".sota-stackedBarChart-label-aboveBar-text").data(t=>t).join("text").attr("class","sota-stackedBarChart-label-aboveBar-text sota-num-label").text((a,e)=>`${g[e]}: ${t.format(".1f")(a[0])}%`).attr("x",t=>V(t[1])+V(t[0])/2).attr("y",(function(t){return X.push([this.getBBox().x,this.getBBox().width]),-2*w})).attr("alignment-baseline","bottom");let a=[];!function t(e){if(e==X.length-1)return a[e]=-2,-2;if(X[e][0]+X[e][1]+v>X[e+1][0]){X[e+1][0]=X[e][0]+X[e][1]+v;let n=t(e+1)-1;return a[e]=n,n}return t(e+1),a[e]=-2,-2}(0),H.selectAll(".sota-stackedBarChart-label-aboveBar-line").data(t=>t).join("polyline").attr("class","sota-stackedBarChart-label-aboveBar-line").attr("points",(t,e)=>{let n=V(t[1])+V(t[0])/2,s=f/2,l=n,o=(a[e]+1)*w;return`${n},${s} ${l},${o} ${X[e][0]+X[e][1]},${o}`}).attr("stroke-width",m).attr("stroke",y).attr("fill","none"),H.selectAll(".sota-stackedBarChart-label-aboveBar-text").data(t=>t).join("text").attr("x",(t,a)=>X[a][0]).attr("y",(t,e)=>a[e]*w),G=-1*t.min(a)*w+20}const q=n+p.top+p.bottom+F+G;M.style("width",P+2*u+"px").attr("height",q).style("margin-left",-u+"px"),N.attr("transform",`translate(${u} ${p.top+F+G})`).attr("width",I),r(S.node())})},customBarChart:function({selector:a,dataFile:n,shapeFile:i,shapeWidth:c=300,inputIsPercentage:h=!1,margin:d=e.margin}){var g=t.select(a),p=g.append("svg"),m=t.select("body").append("div").attr("class","sota-tooltip");const f=p.append("g").attr("class","sota-mainChart");var x=document.querySelector(a).offsetWidth;const u=e.separatorStrokeWidth,b=e.labelLeft,v=e.labelBelow,w=e.lineColor;t.xml("shapes/"+i+".svg").then(e=>{let i=document.importNode(e.documentElement,!0),y=t.select(i).select("path").node(),B=0,k=0;p.append(()=>y).attr("class",(function(){return B=this.getBBox().width,k=this.getBBox().height,""})).remove();let C=c/B,$=k*C;p.append("defs").append("clipPath").attr("id","shapeDef"+a.substring(1)).append(()=>y).attr("transform",`scale(${C})`),t.csv(n+".csv").then(e=>{const[n,r,i]=o(e,h);let g=0,y=[];for(let t of e)y.push(g),g+=+t.value;const B=t.scaleLinear().domain([0,t.sum(e,t=>+t.value)]).range([0,c]),k=t.scaleOrdinal().domain(t.map(e,t=>t.label)).range(t.map(e,(t,a)=>"sota-fill-"+(a+1)).keys());f.selectAll(".sota-customBarChart-bar").data(e).join("rect").attr("class",t=>"sota-customBarChart-bar "+k(t.label)).attr("x",(t,a)=>B(y[a])).attr("y",0).attr("width",t=>B(t.value)).attr("height",$).attr("clip-path","url(#shapeDef"+a.substring(1)+")").call(l,m,n,i,r),f.selectAll(".sota-customBarChart-separator").data(e).join("rect").attr("class","sota-customBarChart-separator").attr("x",(t,a)=>0==a?-u:B(y[a])).attr("y",0).attr("width",u).attr("height",$).attr("fill","white").attr("clip-path","url(#shapeDef"+a.substring(1)+")");var C=[];f.selectAll(".sota-customBarChart-label-aboveBar-text").data(e).join("text").attr("class","sota-customBarChart-label-aboveBar-text").html((t,a)=>`<tspan class="sota-text-label sota-heavy-label">${t.label}:</tspan><tspan class="sota-num-label"> ${s(n[a])}</tspan>`).attr("x",(t,a)=>B(y[a])+B(t.value)/2+b).attr("y",(function(t){return C.push([this.getBBox().x,this.getBBox().width]),$+3*v})).attr("alignment-baseline","top");let A=[];!function t(a){if(a==C.length-1)return A[a]=3,3;if(C[a][0]+C[a][1]+2*b>C[a+1][0]){C[a+1][0]=C[a][0]+C[a][1]+2*b;let e=t(a+1)+1;return A[a]=e,e}return t(a+1),A[a]=3,3}(0),f.selectAll(".sota-customBarChart-label-aboveBar-line").data(e).join("polyline").attr("class","sota-customBarChart-label-aboveBar-line").attr("points",(t,a)=>{let e=B(y[a])+B(t.value)/2,n=$-v,s=e,l=$+(A[a]+1)*v;return`${e},${n} ${s},${l} ${C[a][0]+C[a][1]},${l}`}).attr("stroke-width",u).attr("stroke",w).attr("fill","none"),f.selectAll(".sota-customBarChart-label-aboveBar-text").data(e).join("text").attr("x",(t,a)=>C[a][0]).attr("y",(t,a)=>$+A[a]*v);let j=t.max(A)*v+20,L=$+d.top+d.bottom+j;p.attr("height",L),f.attr("transform",`translate(${d.left} ${d.top})`).attr("width",x-d.left-d.right)}),r(g.node())})},columnChart:function({selector:a,dataFile:n,inputIsPercentage:s=!1,displayPercentage:i=!0,totalResp:c=null,maxVal:h=null,minVal:d=null,mainHeight:g=e.mainHeight,showLegend:p=!1,margin:m={top:20,bottom:20,left:24,right:0}}){const f=e.overflowOffset,x=e.tickSize,u=e.labelAngle,b=e.swatch.between,v=e.swatch.right,w=e.swatch.width,y=e.swatch.height,B=e.swatch.belowBetween,k=e.swatch.below,C=t.select(a),$=C.append("svg"),A=t.select("body").append("div").attr("class","sota-tooltip"),j=$.append("g").attr("class","sota-mainChart"),L=document.querySelector(a).offsetWidth,S=L-m.left-m.right;t.csv(n+".csv").then(e=>{const[n,M,z]=o(e,s,c),P=i||s?n:M;if(null===d)d=s||i?0:t.min(P);else if(!0===d)d=t.min(P);else if(isNaN(d)||""===d)throw"invalid minVal for graph on "+a;if(null===h)h=s||i?100:t.max(P);else if(!0===h)h=t.max(P);else if(isNaN(h)||""===h)throw"invalid maxVal for graph on "+a;const I=t.scaleBand().domain(z).range([0,S]).padding([.3]),N=t.scaleLinear().domain([d,h]).range([g,0]),W=t.scaleOrdinal().domain(z).range(t.map(z,(t,a)=>"sota-fill-"+(a+1)).keys());let E,O=0,V=!1;if(p){let a=[];const n=$.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${m.top})`);if(n.selectAll("nothing").data(e).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t.label).attr("x",(function(){a.push(this.getBBox().width)})).remove(),t.sum(a,t=>t)+a.length*b+(a.length-1)*v>S){let e=L-t.max(a)-w-b;n.selectAll(".sota-gen-legend-swatch").data(z).join("rect").attr("class",t=>"sota-gen-legend-swatch "+W(t)).attr("x",e).attr("y",(t,a)=>(y+B)*a).attr("width",w).attr("height",y),n.selectAll(".sota-gen-legend-text").data(z).join("text").attr("class","sota-gen-legend-text sota-text-label").text(t=>t).attr("x",e+w+b).attr("y",(t,a)=>(y+B)*a+y/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),O=z.length*y+(z.length-1)*B+k}else{let e=L-(t.sum(a,t=>t)+z.length*(w+b)+(z.length-1)*v);n.selectAll(".sota-gen-legend-swatch").data(z).join("rect").attr("class",t=>"sota-gen-legend-swatch "+W(t)).attr("x",(n,s)=>e+s*(w+b+v)+t.sum(a.slice(0,s),t=>t)).attr("y",0).attr("width",w).attr("height",y),n.selectAll(".sota-gen-legend-text").data(z).join("text").attr("class","sota-gen-legend-text sota-text-label").text(t=>t).attr("x",(n,s)=>e+s*(w+b+v)+w+b+t.sum(a.slice(0,s),t=>t)).attr("y",y/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),O=y+k}}else{E=j.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(I).tickSize(0)).attr("transform",`translate(0 ${g})`);const a=E.selectAll("text"),e=a.nodes();for(let t in e){if(t==e.length-1)continue;let a=e[+t].getBBox(),n=e[+t+1].getBBox();if(a.x+a.width>n.x){V=!0;break}}V&&a.attr("text-anchor","end").style("transform",`translateY(4px) rotate(-${u}deg)`).node().classList.add("angled-label")}j.append("g").attr("class","sota-gen-axis sota-gen-yAxis sota-num-axis").call(t.axisLeft(N).tickSize(-x));if(j.selectAll(".sota-columnChart-bar").data(P).join("rect").attr("class",(t,a)=>{let e="sota-columnChart-bar sota-gen-bar";return e+=p?" "+W(z[a]):"",e}).attr("x",(t,a)=>I(z[a])).attr("y",t=>N(t)).attr("width",I.bandwidth()).attr("height",t=>g-N(t)).call(l,A,n,z,M),p)g+=O;else if(V){let a=[];const e=E.select("text").node().getBBox(),n=e.y,s=e.height;E.selectAll("text").each((function(){a.push(this.getBBox().width)}));const l=t.max(a)*Math.sin(u*Math.PI/180),o=s*Math.cos(u*Math.PI/180);g+=n+l+o}else{let a=[];E.selectAll("text").each((function(){a.push(this.getBBox().y+this.getBBox().height)})),g+=+t.max(a)}let Y=g+m.top+m.bottom;$.style("width",L+2*f+"px").attr("height",Y).style("margin-left",-f+"px"),j.attr("transform",`translate(${m.left+f} ${m.top+O})`).attr("width",S),r(C.node())})},groupedBarChart:function({selector:a,dataFile:n,totalResp:l=null,inputIsPercentage:o=!1,displayPercentage:i=!0,minVal:c=0,maxVal:h=null,margin:d=e.margin}){const g=e.groupedBarChart.barHeight,p=e.groupedBarChart.barMargin,m=e.overflowOffset,f=e.groupLabelMargin,x=(e.swatch.between,e.swatch.right,e.swatch.width,e.swatch.height,e.swatch.belowBetween,e.swatch.below,e.xAxisTop),u=t.select(a),b=u.append("svg"),v=t.select("body").append("div").attr("class","sota-tooltip"),w=b.append("g").attr("class","sota-mainChart"),y=document.querySelector(a).offsetWidth,B=y-d.left-d.right;t.csv(n+".csv").then(e=>{window.wow=e;const n=e.columns.splice(1),k=t.map(e,t=>t.group).keys(),C=t.map(e,a=>{let e=[];for(let t of n)e.push(+a[t]);return t.max(e)}).keys(),$=t.max(C,t=>+t);if(null==h)h=o||i?100:$;else if(isNaN(h)||""===h)throw"invalid maxVal for graph on "+a;const A=g+p,j=A*n.length;let L=(j+f)*e.length;const S=t.scaleLinear().domain([c,h]).range([0,B]),M=t.scaleOrdinal().domain(t.map(e,t=>t.group)).range(t.map(e,(t,a)=>(j+f)*a).keys()),z=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>A*a).keys());w.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-groupedBarChart-xAxis sota-num-axis").call(t.axisBottom(S).tickSize(-(L+x))).attr("transform","translate(0 "+(L+x)+")");L+=20+x;const P=w.selectAll(".sota-groupedBarChart-group").data(e).join("g").attr("class","sota-groupedBarChart-group").attr("transform",(t,a)=>`translate(0 ${M(t.group)})`),I=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>"sota-fill-"+(a+1)).keys());P.selectAll(".sota-gen-bar").data(t=>{let a=[];for(let e of n)a.push(+t[e]);return a}).join("rect").attr("class",(t,a)=>"sota-gen-bar "+I(n[a])).attr("y",(t,a)=>+z(n[a])+ +f).attr("x",0).attr("width",(t,a)=>S(o?t:t/l[n[a]]*100)).attr("height",g).on("mouseover",(function(a,e){t.select(this).attr("opacity",.8),v.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"><span class="sota-heavy-label">${n[e]}</span><br/>Percentage: ${s(o?a:a/l[n[e]]*100)}`;return o||(t+="<br/>Number of responses: "+a),t+="</span>",t}).style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",()=>{v.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),v.style("opacity",0)})),w.selectAll(".sota-gen-groupLabel").data(k).join("text").attr("class","sota-gen-groupLabel sota-text-label sota-heavy-label").text(t=>t).attr("alignment-baseline","bottom").attr("x",0).attr("y",t=>+M(t)+ +f).attr("transform","translate(0 -8)");let N=L+d.top+d.bottom;b.style("width",y+2*m+"px").attr("height",N).style("margin-left",-m+"px"),w.attr("transform",`translate(${d.left+m} ${d.top})`).attr("width",B),r(u.node())})},stackedColumnChart:function({selector:a,dataFile:n,inputIsPercentage:l=!1,displayPercentage:o=!0,maxVal:i=null,minVal:c=null,mainHeight:h=e.mainHeight,margin:d={top:20,bottom:20,left:24,right:0}}){const g=e.tickSize,p=e.separatorStrokeWidth,m=e.overflowOffset,f=e.labelAngle,x=e.swatch.between,u=e.swatch.right,b=e.swatch.width,v=e.swatch.height,w=e.swatch.belowBetween,y=e.swatch.below,B=t.select(a),k=B.append("svg"),C=t.select("body").append("div").attr("class","sota-tooltip"),$=k.append("g").attr("class","sota-stackedColumnChart-mainChart"),A=document.querySelector(a).offsetWidth,j=A-d.left-d.right;t.csv(n+".csv").then(e=>{const n=e.columns.slice(1),L=t.map(e,t=>t.group).keys();var S=[];l?e.forEach(t=>{let a=0,e=[];for(let s of n){let n=+t[s];e.push([n,a]),a+=n}S.push(e)}):e.forEach(a=>{let e=0,s=t.sum(n,t=>+a[t]),l=[];for(let t of n){let n=+a[t]/s*100;l.push([n,e,+a[t]]),e+=n}S.push(l)});const M=o||l?S:e.map(t=>+t.value);if(null===c)c=l||o?0:t.min(M);else if(!0===c)c=t.min(M);else if(isNaN(c)||""===c)throw"invalid minVal for graph on "+a;if(null===i)i=l||o?100:t.max(M);else if(!0===i)i=t.max(M);else if(isNaN(i)||""===i)throw"invalid maxVal for graph on "+a;const z=t.scaleBand().domain(L).range([0,j]).padding([.3]),P=t.scaleLinear().domain([c,i]).range([h,0]),I=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>"sota-fill-"+(n.length>3?a+1:2*a+1)).keys()),N=($.append("g").attr("class","sota-gen-axis sota-gen-yAxis sota-num-axis").call(t.axisLeft(P).tickSize(-g)),$.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(z).tickSize(0)).attr("transform",`translate(0 ${h})`));let W=!1;const E=N.selectAll("text"),O=E.nodes();for(let t in O){if(t==O.length-1)continue;let a=O[+t].getBBox(),e=O[+t+1].getBBox();if(a.x+a.width>e.x){W=!0;break}}W&&E.attr("text-anchor","end").style("transform",`translateY(4px) rotate(-${f}deg)`).node().classList.add("angled-label");let V=0,Y=[];const F=k.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${d.top})`);if(F.selectAll("nothing").data(n).enter().append("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(function(){Y.push(this.getBBox().width)})).remove(),t.sum(Y,t=>t)+Y.length*(b+x)+(Y.length-1)*u>j){let a=A+m-t.max(Y)-b-x;F.selectAll(".sota-gen-legend-swatch").data(n).join("rect").attr("class",t=>"sota-gen-legend-swatch "+I(t)).attr("x",a).attr("y",(t,a)=>(v+w)*a).attr("width",b).attr("height",v),F.selectAll(".sota-gen-legend-text").data(n).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",a+b+x).attr("y",(t,a)=>(v+w)*a+v/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),V=n.length*v+(n.length-1)*w+y}else{let a=A+m-(t.sum(Y,t=>t)+n.length*(b+x)+(n.length-1)*u);F.selectAll(".sota-gen-legend-swatch").data(n).join("rect").attr("class",t=>"sota-gen-legend-swatch "+I(t)).attr("x",(e,n)=>a+n*(b+x+u)+t.sum(Y.slice(0,n),t=>t)).attr("y",0).attr("width",b).attr("height",v),F.selectAll(".sota-gen-legend-text").data(n).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,n)=>a+n*(b+x+u)+b+x+t.sum(Y.slice(0,n),t=>t)).attr("y",v/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),V=v+y}const H=$.selectAll(".sota-stackedColumnChart-group").data(S).join("g").attr("class","sota-stackedColumnChart-group").attr("transform",(t,a)=>"translate("+z(L[a])+" 0)");if(H.selectAll(".sota-stackedColumnChart-bar").data(t=>t).join("rect").attr("class",(t,a)=>"sota-stackedColumnChart-bar "+I(a)).attr("x",0).attr("y",t=>P(t[0]+t[1])).attr("width",z.bandwidth()).attr("height",t=>h-P(t[0])).on("mouseover",(function(a,e){t.select(this).attr("opacity",.8),C.style("opacity",1).html(()=>{let t=`<span class="sota-text-label"><span class="sota-heavy-label">${n[e]}</span><br/>Percentage: ${s(a[0])}`;return l||(t+="<br/>Number of responses: "+a[2]),t+="</span>",t}).style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")})).on("mousemove",()=>{C.style("left",t.event.pageX+"px").style("top",t.event.pageY+"px")}).on("mouseout",(function(a){t.select(this).attr("opacity",1),C.style("opacity",0)})),H.selectAll(".sota-stackedColumnChart-separator").data(t=>t).join("rect").attr("class","sota-stackedColumnChart-separator").attr("fill","white").attr("x",0).attr("y",(t,a)=>P(t[0])+P(t[1])-h).attr("height",t=>t[0]>0?p:0).attr("width",z.bandwidth()),h+=V,W){let a=[];const e=N.select("text").node().getBBox(),n=e.y,s=e.height;N.selectAll("text").each((function(){a.push(this.getBBox().width)}));const l=t.max(a)*Math.sin(f*Math.PI/180),o=s*Math.cos(f*Math.PI/180);h+=n+l+o}else{let a=[];N.selectAll("text").each((function(){a.push(this.getBBox().y+this.getBBox().height)})),h+=+t.max(a)}let G=h+d.top+d.bottom+V;k.style("width",A+2*m+"px").attr("height",G).style("margin-left",-m+"px"),$.attr("transform",`translate(${d.left+m} ${d.top+V})`).attr("width",j),r(B.node())})},customColumnChart:function({selector:a,dataFile:n,shapeFile:s,shapeHeight:i=300,inputIsPercentage:c=!1,margin:h=e.margin}){const d=t.select(a),g=d.append("svg"),p=t.select("body").append("div").attr("class","sota-tooltip"),m=g.append("g").attr("class","sota-mainChart"),f=document.querySelector(a).offsetWidth,x=e.separatorStrokeWidth;t.xml("shapes/"+s+".svg").then(e=>{let s=document.importNode(e.documentElement,!0),u=t.select(s).select("path").node(),b=0,v=0;g.append(()=>u).attr("class",(function(){return b=this.getBBox().width,v=this.getBBox().height,""})).remove();let w=i/v,y=b*w;g.append("defs").append("clipPath").attr("id","shapeDef"+a.substring(1)).append(()=>u).attr("transform",`scale(${w})`),t.csv(n+".csv").then(e=>{const[n,s,r]=o(e,c);let d=0,u=[];for(let t of e)u.push(d),d+=+t.value;const b=t.scaleLinear().domain([0,t.sum(e,t=>+t.value)]).range([0,i]),v=t.scaleOrdinal().domain(r).range(t.map(r,(t,a)=>"sota-fill-"+(a+1)).keys());m.selectAll(".sota-customColumnChart-bar").data(e).join("rect").attr("class",t=>"sota-customColumnChart-bar "+v(t.label)).attr("x",0).attr("y",(t,a)=>b(u[a])).attr("width",y).attr("height",t=>b(t.value)).attr("clip-path","url(#shapeDef"+a.substring(1)+")").call(l,p,n,r,s),m.selectAll(".sota-customColumnChart-separator").data(e).join("rect").attr("class","sota-customColumnChart-separator").attr("x",0).attr("y",(t,a)=>0==a?-x:b(u[a])).attr("width",y).attr("height",x).attr("fill","white").attr("clip-path","url(#shapeDef"+a.substring(1)+")");const w=i+h.top+h.bottom;g.attr("height",w),m.attr("transform",`translate(${h.left} ${h.top})`).attr("width",f-h.left-h.right)}),r(d.node())})},multiLineGraph:function({selector:a,dataFile:n,height:s=300,showLegend:l=!0,inputIsPercentage:o=!1,margin:i={top:20,bottom:20,left:24,right:0}}){const c=e.overflowOffset,h=e.swatch.between,d=e.swatch.right,g=e.swatch.width,p=e.swatch.height,m=e.swatch.belowBetween,f=e.swatch.below,x=t.select(a),u=x.append("svg"),b=(t.select("body").append("div").attr("class","sota-tooltip"),document.querySelector(a).offsetWidth),v=b-i.left-i.right,w=s-i.top-i.bottom,y=u.append("g").attr("class","sota-stackedBarChart-mainChart").attr("transform",`translate(${i.left+c} ${i.right})`).attr("width",v);t.csv(n+".csv").then(a=>{const e=a.columns.slice(1),n=t.map(a,t=>t.group).keys(),B=t.scaleBand().domain(e).range([0,v]),k=t.scaleLinear().domain([0,50]).range([w,0]);var C=[];o?a.forEach(t=>{let a=[];for(let n of e)a.push(+t[n]);C.push(a)}):a.forEach(a=>{let n=t.sum(e,t=>+a[t]),s=[];for(let t of e){let e=+a[t]/n*100;s.push([e,+a[t]])}C.push(s)});const $=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>"sota-fill-"+(n.length>3?a+1:2*a+1)).keys()),A=t.scaleOrdinal().domain(n).range(t.map(n,(t,a)=>"sota-stroke-"+(n.length>3?a+1:2*a+1)).keys());let j=0;if(l){let a=[];const e=u.append("g").lower().attr("class","sota-gen-legend").attr("transform",`translate(0 ${i.top})`);if(e.selectAll("nothing").data(n).enter().append("text").attr("class","sota-gen-legend-text").text(t=>t).attr("x",(function(){a.push(this.getBBox().width)})).remove(),t.sum(a,t=>t)+n.length*(g+h)+(n.length-1)*d>v){let s=b+c-t.max(a)-g-h;e.selectAll(".sota-gen-legend-swatch").data(n).join("rect").attr("class",t=>"sota-gen-legend-swatch "+$(t)).attr("x",s).attr("y",(t,a)=>(p+m)*a).attr("width",g).attr("height",p),e.selectAll(".sota-gen-legend-text").data(n).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",s+g+h).attr("y",(t,a)=>(p+m)*a+p/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),j=n.length*p+(n.length-1)*m+f}else{let s=b+c-(t.sum(a,t=>t)+n.length*(g+h)+(n.length-1)*d);e.selectAll(".sota-gen-legend-swatch").data(n).join("rect").attr("class",t=>"sota-gen-legend-swatch "+$(t)).attr("x",(e,n)=>s+n*(g+h+d)+t.sum(a.slice(0,n),t=>t)).attr("y",0).attr("width",g).attr("height",p),e.selectAll(".sota-gen-legend-text").data(n).join("text").attr("class","sota-gen-legend-text sota-text-label sota-heavy-label").text(t=>t).attr("x",(e,n)=>s+n*(g+h+d)+g+h+t.sum(a.slice(0,n),t=>t)).attr("y",p/2).attr("alignment-baseline","central").attr("dominant-baseline","central"),j=p+f}}y.append("g").attr("class","sota-gen-axis sota-gen-xAxis sota-text-axis").call(t.axisBottom(B).ticks(a.length).tickSize(-8)).style("transform","translateY("+w+"px)"),y.append("g").attr("class","sota-gen-axis sota-gen-YAxis sota-num-axis").call(t.axisLeft(k).tickSize(-8)),y.selectAll(".sota-multiLineGraph-group").data(C).join("g").attr("class",(t,a)=>"sota-multiLineGraph-group "+A(n[a])).selectAll(".sota-multiLineGraph-path").data(t=>[t]).join("path").attr("class","sota-multiLineGraph-path").attr("d",t.line().x((t,a)=>B(e[a])+B.bandwidth()/2).y(t=>k(t[0]))).attr("fill","none").style("stroke-width",3),s=w+j,u.style("width",b+2*c+"px").attr("height",s+j+"px").style("margin-left",-c+"px"),y.attr("transform",`translate(${i.left} ${i.top+j})`).attr("width",v),r(x.node())})},setColors:function(t){let a="";for(const e of t.sections){const t=e.slug;a+=`\n        #sota-section-${t}{\n            background-color: ${e.colors[0]};\n            color: ${e.colors[0]};\n        }\n        #sota-section-${t} .sota-gen-bar, .sota-section-${t} .sota-gen-bar{\n            fill: ${e.colors[3]};\n        }      \n        #sota-navbar #sota-navbar-item-${t}:hover, #sota-navbar #sota-navbar-item-${t}.selected{\n            background-color: ${e.colors[0]};            \n        }\n        @media (max-width: 1400px){\n            #sota-navbar #sota-navbar-item-${t}{\n                background-color: ${e.colors[0]};            \n            }        \n        }\n        `;for(const n in e.colors)a+=`\n        #sota-section-${t} .sota-fill-${+n+1}, .sota-section-${t} .sota-fill-${+n+1}{\n            fill: ${e.colors[n]};\n        }\n        #sota-section-${t} .sota-stroke-${+n+1}, .sota-section-${t} .sota-stroke-${+n+1}{\n            stroke: ${e.colors[n]};\n        }\n        `}document.head.appendChild(document.createElement("style")).textContent=a},setStyles:function(t=e){const a=t.numberFont,n=t.labelFont,s=t.separatorStrokeWidth,l=t.lineColor;let o=`\n.sota-section {\n\tpadding: 48px 0;\n\twidth: 100%\n}\n\n.sota-section > p{\n  color: #fff;\n  font-family: ${n};\n  line-height: 1.5;\n  max-width: 800px;\n  margin: 64px auto;\n  padding: 0 24px;\n}\n\n.sota-section h1 {\n\tfont-size: 56px;\n\tfont-family: ${a}, sans-serif;\n\ttext-transform: uppercase;\n\tfont-weight: 700;\n\ttext-align: center;\n\tcolor: #fff\n}\n\n.sota-section-inner {\n    position: relative;\n\tmax-width: 1500px;\n\tbox-sizing: border-box;\n\tfont-family: "Montserrat", Arial, sans-serif;\n\twidth: 100%;\n\tpadding: 48px 24px;\n\tmargin: 0 auto;\n\tbackground-color: #fff;\n\tgrid-template-columns: minmax(0, 1fr)\n}\n\n.sota-section-inner:before{\n    pointer-events: none;\n    content: "";\n    position: absolute;\n    left: 0;\n    top: 32px;\n    display: none;\n    height: calc(100% - 64px);\n}\n\n.sota-section-inner:after{\n    content: "";\n    clear: both;\n    display: table;    \n}\n\n.sota-section .sota-module {\n\tposition: absolute;\n\tfloat: left;\n\twidth: calc(100% - 48px);\n\tborder-bottom: 1px solid rgba(0,0,0,0.2);\n\tpadding-bottom: 32px;\n\tmargin-bottom: 32px;\n}\n\n@media (min-width: 800px) {\n    .sota-section-inner:before{\n      width: 50%;\n      display: block;\n        border-right: 1px solid rgba(0,0,0,0.1);\n    }\n    \n    .sota-section .sota-module {\n        width: calc(50% - 48px);\n    }\n}\n\n@media (min-width: 1200px) {    \n    .sota-section .sota-module {\n        width: calc(33% - 48px);\n    }\n\n    .sota-section-inner:before{\n        width: 33.3%;\n        left: 33.3%;\n        border-left: 1px solid rgba(0,0,0,0.1);\n    }\n}\n\n.sota-module>svg {\n\twidth: 100%\n}\n\n.sota-module h3 {\n\tfont-family: ${a}, sans-serif;\n\tfont-weight: 700;\n\ttext-transform: uppercase;\n\tline-height: 1.1;\n}\n\n.sota-module p, ul, ol{\n    font-size: 20px;\n    line-height: 1.4;\n    font-family: ${n};\n}\n\n.sota-module img{\n    max-width: 100%;\n    margin: 32px 0;\n}\n\n.sota-module .subtitle {\n\tfont-family: ${n}, serif;\n\topacity: 0.4;\n\tline-height: 1.1;\n}\n\n.sota-heavy-label{\n    font-weight: 700;\n}\n\n.sota-num-label, .sota-num-axis .tick text{\n    font-family: "Montserrat", sans-serif;\n    font-size: 14px;\n    fill: ${e.labelColor};\n}\n\n.sota-text-label, .sota-text-axis .tick text{\n    font-family: ${n}, serif;\n    fill: black;\n}\n\n.sota-num-label.sota-stackedBarChart-label-onBar{\n    fill: rgba(255,255,255,0.6);\n}\n\n.sota-tooltip {\n\tbackground-color: #222;\n\tcolor: #fff;\n\tpadding: 12px;\n\tposition: absolute;\n\tpointer-events: none;\n\topacity: 0;\n\ttransform: translate(-50%, -100%);\n\twhite-space: nowrap\n}\n\n.sota-gen-axis{\n    opacity: 0.4;\n}\n\n.sota-gen-axis.sota-gen-xAxis .tick text {\n\ttransform: translateY(4px);\n}\n\n.sota-gen-axis.sota-gen-yAxis .tick text {\n\ttransform: translateX(-8px);\n\ttext-anchor: end\n}\n\n.sota-gen-xAxis:not(.sota-text-axis) g.tick:first-of-type text:not(.angled-label){\n    text-anchor: start;\n}\n\n.sota-gen-xAxis:not(.sota-text-axis) g.tick:last-of-type text:not(.angled-label){\n    text-anchor: end;\n}\n\n.sota-gen-axis .tick line,\n.sota-gen-axis path.domain {\n\tstroke-width: ${s}px;\n\tstroke: ${l};\n}\n\n.sota-groupedBarChart-xAxis .tick line {\n\topacity: 0.2\n}\n\n.sota-big {\n\tfont-weight: 700;\n\tfont-size: 96px;\n\tline-height: 1.0;\n\tmargin-top: -8px;\n\tfont-family: ${n}, serif\n}\n\n.sota-section-inner.hide .module{\n    border-bottom: none;\n}\n\n.sota-section-inner.hide .module > *{\n    visibility: hidden;\n}\n\n.sota-section-inner:not(.hide) .loading{\n    display: none;\n}\n\n#sota-navbar ~ .sota-section:before{\n    content: "";\n    z-index: 4;\n    position: sticky;\n    top: 64px;\n    width: 100%;\n    height: 8px;\n    background-color: inherit;\n    display: block;\n}\n\n#sota-navbar{\n    color: #fff;\n}\n\n#sota-navbar .sz-navbar-item a, #sota-navbar .sz-navbar-item span{\n    font-family: ${a};\n    line-height: 64px;\n    box-sizing: border-box;\n    text-align: center;\n    text-decoration: none;\n    color: #fff;\n    height: 64px;\n    padding: 0 8px;\n    display: block;\n}\n\n#sota-navbar .sota-navbar-logo, #sota-navbar .sota-navbar-logo a{\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n\n#sota-navbar .sota-navbar-logo img{\n    height: 50%;\n}\n\n@media (max-width: 1400px){\n    #sota-navbar .sz-navbar-items{\n        background-color: #000;\n        z-index: 4;\n        height: 100vh;\n        box-sizing: border-box;\n        justify-content: flex-start;\n    }\n\n    #sota-navbar div.sz-navbar-item{\n        width: 100%;\n        margin-bottom: 0;\n    }\n    \n    #sota-navbar .sz-navbar-inner > .sota-navbar-text{\n        display: none;\n    }\n}\n\n@media (min-width: 1400px){\n    #sota-navbar .sz-navbar-items{\n        margin-left: auto;\n    }\n\n    #sota-navbar .sz-navbar-item.sota-navbar-text{\n        display: none;\n    }\n    \n    #sota-navbar .sota-navbar-logo{\n        margin-right: 24px;\n    }\n}\n\n#sota-navbar .sota-navbar-text span{\n    font-family: ${n};\n    font-weight: 700;\n}\n\n    `;document.head.appendChild(document.createElement("style")).textContent=o,console.log("styles set")}};return i.sotaConfig=e,i.colorInterpolate=a,i.sotaMasonry=function(){document.querySelectorAll(".sota-section-inner").forEach(t=>{let a=0;const e=t.querySelectorAll(".sota-module svg").length;if(0===e){new Masonry(t,{itemSelector:".sota-module",columnWidth:".sota-module",gutter:48});return}const n=document.createElement("p");n.innerHTML="Loading...",n.classList.add("loading"),t.prepend(n),t.addEventListener("sotaChartRendered",()=>{if(a++,a===e){t.classList.remove("hide");new Masonry(t,{itemSelector:".sota-module",columnWidth:".sota-module",gutter:48})}})})},i.sotaNavbar=function(t,a="",e=!1,n=!1,s=!1){const l=document.getElementById("sota-navbar");l.classList.add("sz-navbar");let o='\n    <div class="sz-navbar-left sz-navbar-inner">\n      <input type="checkbox" id="sz-navbar-check">\n      <label for="sz-navbar-check" class="sz-navbar-hamburger">☰</label>';e&&(o+=s?`<div class="sota-navbar-logo"><a href="${s}"><img src="${e}" alt="Navbar logo"></a></div>`:`<div class="sota-navbar-logo"><img src="${e}" alt="Navbar logo"></div>`),o+=n?`<div class="sota-navbar-text"><span><a href="${n}"><${a}</a></span></div>`:`<div class="sota-navbar-text"><span>${a}</span></div>`,o+='<div class="sz-navbar-items">',o+=n?`<div class="sota-navbar-text sz-navbar-item"><span><a href="${n}"><${a}</a></span></div>`:`<div class="sota-navbar-text sz-navbar-item"><span>${a}</span></div>`;for(const a of t.sections)o+=`<div class="sz-navbar-item" id="sota-navbar-item-${a.slug}"><a href="#sota-section-${a.slug}">${a.name}</a></div>`;o+="</div>",l.innerHTML=o;const r=[];for(const a of t.sections)r.push(document.getElementById("sota-section-"+a.slug));function i(){if(window.innerWidth>600)for(const a in r){const e=r[a],n=t.sections[a],s=document.getElementById("sota-navbar-item-"+n.slug);window.scrollY>=e.offsetTop&&window.scrollY<e.offsetTop+e.offsetHeight?s.classList.add("selected"):s.classList.remove("selected")}}console.log(r),window.onload=()=>{i()},window.addEventListener("scroll",()=>{i()});const c=document.querySelectorAll("#sota-navbar .sz-navbar-item"),h=document.getElementById("sz-navbar-check");for(let t=0;t<c.length;t++)c[t].addEventListener("click",()=>{i(),h.checked=!1})},i.setParam=function(t,a){this.sotaConfig[t]=a},i.getParam=function(t){return this.sotaConfig[t]},i}));
